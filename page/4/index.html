
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
    <title>向向的博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="向向">
    

    
    <meta name="description" content="This is my blog...">
<meta property="og:type" content="website">
<meta property="og:title" content="向向的博客">
<meta property="og:url" content="https:&#x2F;&#x2F;sunnie-shine.github.io&#x2F;page&#x2F;4&#x2F;index.html">
<meta property="og:site_name" content="向向的博客">
<meta property="og:description" content="This is my blog...">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">

    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="向向的博客" title="向向的博客"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="向向的博客">向向的博客</a></h1>
				<h2 class="blog-motto">Console.WriteLine(&#34;Hello, ^_^&#34;);</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="菜单">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页</a></li>
					
						<li><a href="/archives">全部文档</a></li>
					
						<li><a href="/categories">分类</a></li>
					
						<li><a href="/tags">标签</a></li>
					
						<li><a href="/about">关于</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="搜索" />
						<input type="hidden" name="q" value="site:Sunnie-Shine.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/11/23/clang-13-function/" title="C 语言语法系列（13）：函数" itemprop="url">C 语言语法系列（13）：函数</a>
    
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="向向" target="_blank" itemprop="author">向向</a>
		
  <p class="article-time">
    <time datetime="2019-11-23T02:38:09.000Z" itemprop="datePublished"> 发表于 2019-11-23</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="What-is-函数？"><a href="#What-is-函数？" class="headerlink" title="What is 函数？"></a>What is 函数？</h2><p>学过数学的人都知道，数学有一种函数表示方法，叫 $f(x) = \text{expression}$ 的东西，其中等号右边应当填入一个<strong>表达式</strong>（expression）。</p>
<p>C 语言和数学的函数差不太多，不过 C 语言是为编程服务的，所以 C 语言可能还会广义化数学上的函数。C 语言里，函数其实是“一个过程”，这个“过程”下会执行一系列的操作，比如输入输出、循环等等。不过和数学相同的地方是，C 语言函数在执行完毕这一系列语句时，会有一个函数值（返回值），这个值就是这个“过程”最后的执行结果。比如说 $f(x) = x^2 + 2x + 3$ 的式子，我们可以这么去写C语言。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x * x + <span class="number">2</span> * x + <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;i);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"f(%d) = %d"</span>, i, f(i));</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>首先我们发现，在 <code>int main(void)</code> 前，还有一段代码独立于它而存在。它写成 <code>int f(int x)</code>，而里面只有一句话，是用类似于 <code>main</code> 里的 <code>return 0;</code> 差不太多的写法，也用了 <code>return</code> 单词。现在来解释一下它是什么意思。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">值域 函数名称(定义域 变量名称)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> 函数值;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因为它和数学不同，定义域和值域不像数学那样，实数范围包含整数和小数，人可以灵活处理，电脑不能，所以电脑的定义域内整数和小数是区分开的，因此必定要为变量名和函数值先定下一个取值范围，再来写操作。定义定义域和值域时，即写出操作过程之中，定义域的取值范围（我们一般用整数，所以 <code>int</code> 足够了）；而值域，即函数值，一定根据刚才的计算公式，得到的是也应是 <code>int</code>，所以还是 <code>int</code>。所以，分别写在对应位置上。</p>
<p>然后你对照这个写法和刚才 $f(x) = x^2 + 2x + 3$，你就会发现，其实 <code>return</code> 语句下就写的是这个表达式。这是因为，<code>return</code> 语句专门用于获取函数的函数值（返回值）。因为这个数学函数在编程里面肯定只有这样一个操作（得到数值结果），所以在 C 语言里，<code>f</code> 函数里只有 <code>return</code> 这一句话。</p>
<p>然后在 <code>main</code> 里，我们要使用这个函数功能的话，就可以这么写。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;i);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>, f(i)); <span class="comment">// 注意这句话。</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>特别注意那句话，我们使用 <code>f</code> 函数了，但是因为那个函数最后是一个结果，所以我们可以直接当成一个数来写进<code>printf</code> 之中，输出这个数。我们想要把这个手动输入的i当成自变量放进 <code>f</code> 函数之中得到结果。所以是这么写的。当然了，也可以分写两句话：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;i);</span><br><span class="line"><span class="keyword">int</span> result = f(i);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>, result);</span><br></pre></td></tr></table></figure>
<p>这样要好理解一些，不过其实都一样。</p>
<p>当然，我们可以这么去想这个问题：输入一个值，然后得到  <code>f(x)</code> 函数值，然后输出结果。这样的三个部分的操作，都可以同时丢进 C 语言的这个 <code>f</code> 函数之中。数学就不可以，C 语言就可以，而这就是因为，C 语言里的函数是执行一系列的操作，不一定只求一个值就完了，不过，这样执行输入输出了，也就不必再去纠结它程序结果的函数值了（因为结果已经输出了，根本就不需要再单独给这个程序一个函数值），这样的“只执行一系列语句”的函数，我们可以为值域部分写上 <code>void</code> 一词（<code>void</code> 一词就是空白、没有的意思）。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">f</span><span class="params">(<span class="keyword">void</span>)</span> <span class="comment">// Note here.</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, result;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;i);</span><br><span class="line">    result = x * x + <span class="number">2</span> * x + <span class="number">3</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"f(%d) = %d"</span>, i, result);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span>; <span class="comment">// Note here.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    f(); <span class="comment">// Note here.</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>看看这个程序和之前的程序，不同之处有三个：第一是 <code>int f(int x)</code> 改变为了 <code>void f()</code>；第二是最后末尾的 <code>return</code> 语句什么结果都没有，只是一个单独的 <code>return</code> 单词；第三是 <code>main</code> 之中，使用 <code>f</code> s函数时的写法，括号是空的，啥都没有，然后就直接分号结尾了。</p>
<p>至于第一点，是因为我们刚才说到，它执行的是一系列的操作，而结果已经在中间输出过了，所以不需要对末尾再写出函数值，所以为这种函数用 <code>void</code>。至于括号里面为啥也没有数值了呢？因为括号不需要数值了，因为输入的数据值已经在函数里面体现了，何必非要写在上面括号里面去呢，这个函数功能根本就不需要用到这个 <code>x</code> 了，所以为了表示它是函数，就只有一个空的括号而已；</p>
<p>第二点是因为，函数既然没有函数值结果了，但因为要结束这个函数，所以需要 <code>return</code> 作为结尾，表示函数执行完毕。当然了，这种末尾直接结束的函数，是可以不写这个 <code>return;</code> 语句的。但如果你想中途结束程序，就必须加上这句话，来表示在某个中间执行结果下就结束这个函数的运行；</p>
<p>第三点是因为，刚才我们是当 <code>f</code> 函数是一个数值来处理的。但是现在 <code>f</code> 函数只是一个执行输入、求结果和输出三个操作的过程，所以要使用它直接写上去就可以了。</p>
<h2 id="参数的定义"><a href="#参数的定义" class="headerlink" title="参数的定义"></a>参数的定义</h2><p>在 C 语言之中，我们称函数使用的小括号内的变量（可以有一个，也可以有很多个）叫<strong>参数</strong>。这一点来说，它和数学不太一样，数学里的参数往往指的是函数表达式里不同于自变量的数值（如 $f(x) = ax^2 + bx + c$ 之中的字母 <code>a</code>、<code>b</code>、<code>c</code>）。</p>
<p>这里要提两个定义，考试要考的：</p>
<ul>
<li><strong>形参</strong>（Parameter）：函数的第一句话里，小括号内的变量；</li>
<li><strong>实参</strong>（Argument）：函数内使用形参的这些变量。</li>
</ul>
<p>理解也很好理解。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> x)</span> <span class="comment">// Parameter.</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x * x + <span class="number">2</span> * x + <span class="number">3</span>; <span class="comment">// Using the value (argument).</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="小括号里写-void？"><a href="#小括号里写-void？" class="headerlink" title="小括号里写 void？"></a>小括号里写 <code>void</code>？</h2><p>最后需要你注意的是，在小括号里也要写 <code>void</code>，这是为什么呢？</p>
<p>如果我们知道这个函数不应该有参数，那么就在小括号里写上 <code>void</code> 关键字来告诉编译器，这个函数不需要任何参数。如果你不写它，往往程序也可以正常执行，但少见有些情况会出现内存泄漏和内存溢出的问题和 bug，导致很严重的错误。</p>
<p>所以为了安全起见，我们习惯在不需要参数的函数里，小括号里添加 <code>void</code> 关键字。</p>
<h2 id="main-函数剖析"><a href="#main-函数剖析" class="headerlink" title="main 函数剖析"></a><code>main</code> 函数剖析</h2><h3 id="main-究竟是什么东西"><a href="#main-究竟是什么东西" class="headerlink" title="main 究竟是什么东西"></a><code>main</code> 究竟是什么东西</h3><p>我们经常听到老师提起“<code>main</code> 函数”这个说法。它其实也是一个函数。理解起来也很容易：因为它执行的是一系列的操作。不过它更为特殊一些：所有 C 语言程序都需要从 <code>main</code> 的第一句开始执行。注意哈，这里说的是“执行”，后面会告诉大家，编译（从 C 语言翻译为机器识别的二进制代码串的过程）则是从最上面第一句开始的，跟 <code>main</code> 无关。</p>
<h3 id="main-的返回值"><a href="#main-的返回值" class="headerlink" title="main 的返回值"></a><code>main</code> 的返回值</h3><p>那么，为什么 <code>main</code> 它也有函数值？<code>main</code> 有函数值的原因在于，为了大家方便查 bug 才搞的机制。让程序完整无误不出错地走一遍，默认为 0，表示没错；但如果中途出现某种错误了，比如没有赋值就使用变量啊这种，就会报错，这个时候程序会直接终止 <code>main</code>，而不是调过错误的语句继续往下走。这个时候，终止了 <code>main</code> 必然会直接得到返回值（函数值），这个时候为了方便查错，我们就把这样可以导致同一类出错情况的返回值给它规定成同一个返回值（函数值），这样开发人员就不会很头痛，从头开始找错。</p>
<blockquote>
<p>你需要记住一点，DevCpp 软件在没有为变量赋值时就使用变量时，<code>main</code> 的函数值为 3221225477。</p>
</blockquote>
<h3 id="main-的参数"><a href="#main-的参数" class="headerlink" title="main 的参数"></a><code>main</code> 的参数</h3><p>另外，<code>main</code> 函数里有时候有一坨东西，有时候又没有，是什么情况。</p>
<ul>
<li><code>int main();</code></li>
<li><code>int main(int argc, char *argv[]);</code></li>
</ul>
<p>我们经常看到这两种写法。第一种表示 <code>main</code> 没有参数；第二种则是有两个参数。这两个参数是什么呢？其实，这两个参数指的是你在使用 cmd 命令行对程序操作时，产生的参数。</p>
<p>比如我们在使用 Linux 下的命令：<code>rm</code>（remove）命令时，总会在网上看到资料说：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ rm -rf *</span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ rm -rf</span><br></pre></td></tr></table></figure>
<p>有时候还可以省略这个星号。先不管是什么东西。我们来说明一下。</p>
<p><code>rm</code> 是这个命令的名字（它实际上是一个程序名，功能是删除文件），而我们习惯性写上的 <code>-rf</code> 参数，其实是删除文件需要的参数。<code>-rf</code> 表示递归删除文件，且不保留痕迹。所以这里的 <code>-rf</code> 其实就是在执行这个 <code>rm</code> 程序在进入 <code>main</code> 里的参数，<code>-rf</code> 是第二个参数的数值。</p>
<p>为了达到程序执行的功能，有些时候会在调用程序和进入 <code>main</code> 前就要传递一系列的参数进去。这个时候我们可以为 <code>main</code> 设定这两个参数，就可以达到效果；第一个参数表明在执行命令行时，参数的个数；第二个则是参数的具体写法。目前你知道这个用途就可以了，因为参数的后者 <code>char *argv[]</code> 是一个字符串数组，这一点在这里阐述是超纲的，所以不在这里叙述。</p>
<h2 id="函数的定义"><a href="#函数的定义" class="headerlink" title="函数的定义"></a>函数的定义</h2><h3 id="声明格式"><a href="#声明格式" class="headerlink" title="声明格式"></a>声明格式</h3><p>当函数放在 <code>main</code> 下的时候，在编译时，因为 <code>main</code> 会从上到下执行语句，但执行过程之中，发现有些东西没有声明，自然就不能用。比如这样：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;i);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"f(%d) = %d\n"</span>, i, f(i));</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> number)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> number * <span class="number">2</span> + <span class="number">26</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个时候在语句执行到 <code>printf</code> 时，发现 <code>f</code> 是前文里没有看到过的函数，这个时候就会给出警告。所以函数的声明就需要放在执行 <code>main</code> 前面（即 <code>#include</code> 命令和 <code>int main(void)</code> 之前）。所以应写成这样：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span>)</span></span>; <span class="comment">// Statement of function (without parameter name).</span></span><br><span class="line"><span class="comment">//int f(int number); // Or write like this (with parameter name).</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> number)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>甚至可以写在执行语句前一句处：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;i);</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span>)</span></span>; <span class="comment">// Here.</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"f(%d) = %d\n"</span>, i, f(i));</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> number)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> number * <span class="number">2</span> + <span class="number">26</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>都可以。</p>
<h3 id="声明函数的原理"><a href="#声明函数的原理" class="headerlink" title="声明函数的原理"></a>声明函数的原理</h3><p>从原理上讲，函数的声明是什么东西呢？C 语言是一种<strong>面向过程的编程语言</strong>（Process Oriented Programming，简称 <strong>POP</strong>），这种编程语言就是按照流程一步一步执行即可，无需考虑其它因素。但为了代码书写的方便，C 语言为我们提供了两种可定义和声明的元素：变量（含数组变量以及后面要说到的指针变量）和函数。变量和函数的相似之处就是都需要定义出来才能使用（即先定义后使用）。像是 C 语言这样，如果我们尝试把其它的函数写在 <code>main</code> 之后，按照顺次执行，就会遇到无法解析的函数名称，于是我们肯定需要声明（也叫定义）这个函数了。</p>
<p>那么，声明格式和函数名一致，是为了保证简单易懂。把函数名写在中间，左边写返回值，右边写参数，并用小括号把所有参数括起来，这样便是一个完整的函数变量的定义。所以实际上，从这个角度出发，函数也可以被视作一种特殊的变量类型。不过它和普通变量不同的是，它往往写在最外面（全局范围），一般不写在函数执行逻辑里，是因为这样书写，就不好看到它们。</p>
<h2 id="函数内的变量"><a href="#函数内的变量" class="headerlink" title="函数内的变量"></a>函数内的变量</h2><h3 id="变量的生命周期和函数的销毁"><a href="#变量的生命周期和函数的销毁" class="headerlink" title="变量的生命周期和函数的销毁"></a>变量的生命周期和函数的销毁</h3><p>变量分为多种：外部变量、内部变量（函数内变量）等。它们各自有不同用途，所以会被放在不同的位置。不过，要知道，它们的生命周期也不同。</p>
<p>变量会在函数用完时被销毁，<code>main</code> 也是一样。如果程序执行完毕时，即 <code>main</code> 也执行完毕，里面的所有变量都会直接蒸发，变得不存在。其他函数也是。所以我们来看这个函数：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> temp = a;</span><br><span class="line">    a = b;</span><br><span class="line">    b = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>很显然，这个写法是交换两个数据用的。但是函数在执行完后，变量就会不复存在。所以交换完后，变量就会消失，使得交换之后的结果也不能继续使用。所以，换句话说：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">swap</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">2</span>, b = <span class="number">3</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"a = %d, b = %d\n"</span>, a, b);</span><br><span class="line">    swap(a, b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"a = %d, b = %d\n"</span>, a, b);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出语句其实是没有任何变化的，即两处 <code>printf</code> 函数的输出结果都是 <code>a = 2</code>、<code>b = 3</code>。这一点要引起额外注意。这是因为，在执行交换函数 <code>swap</code> 后，它仅交换了在 <code>swap</code> 函数里的 <code>a</code> 和 <code>b</code> 变量，而并没有对 <code>main</code> 函数里的 <code>a</code> 和 <code>b</code> 作出任何影响，因为函数传递数值的模式是值传递，即只会把数值内容复制一份然后丢到 <code>swap</code> 里来用，所以实际上它交换的其实是复制后的副本，而真正的元素却没有发生改变。在交换后，函数被销毁，交换的副本也被同时销毁，所以原本的变量根本就没有发生任何的变化。</p>
<p>另外，如果把变量写在函数外部的话，这样的变量在程序 <code>main</code> 执行的过程之中，只要 <code>main</code> 没有销毁（程序没有结束），变量就会一直存在。</p>
<p>最后，还有一个冷门的知识点。</p>
<h3 id="大括号封闭变量"><a href="#大括号封闭变量" class="headerlink" title="大括号封闭变量"></a>大括号封闭变量</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">4</span>;</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, a); <span class="comment">// 2</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, a); <span class="comment">// 4</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>虽然是同一个变量名字，但变量不同，并且有一个变量是用大括号括起来的，虽然这个大括号看起来好像不知道到底是什么用途。这里的大括号只有一个用：封闭变量。这个大括号内部的变量外部是无法使用的，而内部的输出语句也只是会找到最近的变量名作输出。所以就是 2 了；而外部的输出语句输出的 <code>a</code>，由于大括号封闭变量的关系，内部的 2 完全不可能被外部的这个输出语句的 <code>a</code>看到，所以根本不可能是 2，所以是相对于这个内部的 <code>a</code> 外面的这个 4。</p>
<p>这告诉了我们，之前用于分割语义的大括号，它的原理到底是如何的。</p>
<h2 id="一些修饰函数内成员和参数的修饰符"><a href="#一些修饰函数内成员和参数的修饰符" class="headerlink" title="一些修饰函数内成员和参数的修饰符"></a>一些修饰函数内成员和参数的修饰符</h2><h3 id="static-修饰符"><a href="#static-修饰符" class="headerlink" title="static 修饰符"></a><code>static</code> 修饰符</h3><p>在函数里对一些普通变量修饰 <code>static</code> 修饰符，可以让程序在反复调用这个函数时，这个变量都只会初始化一次，后续都直接用这个变量，而且函数被销毁的时候，这个变量也不会被同时销毁。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span> a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> z = <span class="number">10</span>;</span><br><span class="line">    </span><br><span class="line">    z += <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">return</span> a + z;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果调用这个函数的话：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, f(i));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>那么，首次 <code>z</code> 会被初始化为 10，随后执行 <code>z += 3</code> 使之变为 13，然后返回 <code>13 + i</code>。每一次 <code>i</code> 传入的数值都不同，第一次是 0，第二次是 1，第三次是 2；而使用 <code>f</code> 函数时，<code>z</code> 第一次是 10（后自增 3，变为 13），第二次是 16，第三次则是 19。所以三次的输出结果是 <code>13 17 21</code>。</p>
<h3 id="auto-修饰符"><a href="#auto-修饰符" class="headerlink" title="auto 修饰符"></a><code>auto</code> 修饰符</h3><p>实际上，所有在函数里声明的变量，都是 <code>auto</code> 的，也就是说，你不写它们，都会被默认添加这个修饰符。这种修饰符表示这个变量在栈内存进行分配。所谓的栈内存分配，就是跟着函数走。函数死亡，它就死亡，你就无法再使用里面的资源了。</p>
<p>如果你不想让它消失，请在函数里对这个变量使用 <code>static</code> 修饰符，表示它不跟着函数销毁而销毁。</p>
<h3 id="register-修饰符"><a href="#register-修饰符" class="headerlink" title="register 修饰符"></a><code>register</code> 修饰符</h3><p>这个修饰符虽然现在说还为时尚早，但这个修饰符并不需要任何的语法依托。它表示这个变量将在执行期间直接丢到寄存器里。这个操作就为了一个字：快。我们都知道，程序的分配的变量都是在内存里的，而执行这些程序，还是得被提取出来，丢进 CPU 里挨着执行它们。如果我们最初就把它们丢进了寄存器里，由于寄存器就在 CPU 里，所以这样执行起来，就会比其它变量算得更快。所以，我们如果非得考虑性能的话，我们会把常用的简单类型变量直接丢进寄存器里，方式就是添加 <code>register</code> 修饰符在定义语句之前就可以了。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/C/">C</a>►<a class="article-category-link" href="/categories/C/C-%E8%AF%AD%E6%B3%95/">C.语法</a>►<a class="article-category-link" href="/categories/C/C-%E8%AF%AD%E6%B3%95/C-%E8%AF%AD%E6%B3%95-%E6%95%99%E7%A8%8B/">C.语法.教程</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/C/">C</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>



   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/11/22/clang-12-hi-dimension-array/" title="C 语言语法系列（12）：三维或更高维的数组" itemprop="url">C 语言语法系列（12）：三维或更高维的数组</a>
    
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="向向" target="_blank" itemprop="author">向向</a>
		
  <p class="article-time">
    <time datetime="2019-11-22T12:46:11.000Z" itemprop="datePublished"> 发表于 2019-11-22</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="有没有三维数组？"><a href="#有没有三维数组？" class="headerlink" title="有没有三维数组？"></a>有没有三维数组？</h2><p>前文已经描述了一维数组和二维数组的基本语法和使用方式。那么，按道理来说，三维数组或者更高维度的数组是存在的。确实如此。不过……</p>
<h2 id="三维数组的定义"><a href="#三维数组的定义" class="headerlink" title="三维数组的定义"></a>三维数组的定义</h2><p>拿三维数组来说，我们要定义一个三维数组，并按照规范初始化赋值，就得是这样的：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> cube[<span class="number">2</span>][<span class="number">3</span>][<span class="number">4</span>] =</span><br><span class="line">&#123;</span><br><span class="line">    &#123; <span class="number">0</span> &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &#123; <span class="number">1</span> &#125;,</span><br><span class="line">        &#123; <span class="number">4</span>, <span class="number">5</span> &#125;,</span><br><span class="line">        &#123; <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> cube[][<span class="number">3</span>][<span class="number">4</span>] =</span><br><span class="line">&#123;</span><br><span class="line">    &#123;</span><br><span class="line">        &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> &#125;,</span><br><span class="line">        &#123; <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span> &#125;,</span><br><span class="line">        &#123; <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span> &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &#123; <span class="number">1</span> &#125;,</span><br><span class="line">        &#123; <span class="number">4</span>, <span class="number">5</span> &#125;,</span><br><span class="line">        &#123; <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>都是允许的。具体的赋值原理和原因在前文已经阐述得非常详细了。但需要你注意两个地方。</p>
<p>第一，不完全赋值是可以混用的，比如第一个示例里的赋值模式，在第一个大括号里给了一个 0，这表示会把第一个维度里的所有元素全部赋值为 0。那么第一个维度里包含哪些元素呢？或者说，元素一共多少个呢？</p>
<p>可以从最上面的定义语句的行元素数、列元素数和竖元素数看出，这个三维数组一共有 2 行 3 列 4 竖。不过三维数组复杂的地方在于，它如何规划内存空间。我们依旧按照顺次来看。这个三维数组会分为两个大块来表示行，即这个是一个一维数组，而这个一维数组一共包含两个元素，都存放的是一个<strong>二维数组</strong>，而这个二维数组内存放着 3 行 4 列的元素，这么一个情况。</p>
<p>不过，可以从分配内存空间来看，三维数组只能省略行元素个数这一个条件。</p>
<h2 id="三维数组的存取数值"><a href="#三维数组的存取数值" class="headerlink" title="三维数组的存取数值"></a>三维数组的存取数值</h2><p>三维数组的存取数值的方式和二维数组雷同，不过还是希望你注意的是，每一个维度的索引都是从 0 开始的，所以不要忘了这一点，而超出了数组内存的范围。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> value = arr[<span class="number">1</span>][<span class="number">2</span>][<span class="number">3</span>];</span><br></pre></td></tr></table></figure>
<p>将会取出这个数组的第二行、第三列的第四个元素。</p>
<h2 id="更高维度的数组？"><a href="#更高维度的数组？" class="headerlink" title="更高维度的数组？"></a>更高维度的数组？</h2><p>是的，C 语言甚至允许你创建四维数组、五维数组等等。那么 C 语言创建数组的上限是多少呢？维度是没有上限一说的，但它受到电脑容量的制约。</p>
<p>如果你尝试把数组元素总数定义得过大的话，就会出现这个错误信息：</p>
<p><img src="c6262.png" alt=""></p>
<p>这个错误信息意味着你的数组定义得太大了。具体的内容说的是：“函数在栈里使用了 ‘2147483644’ 字节，超出了原本定义的栈大小 ‘16384’，请尝试移动一些数据到堆里去”。</p>
<p>按照 16384 而言，你只能定义一个小于这么多的所占内存的数组。而在外部定义也不可以超过 1073741823 个元素。</p>
<p>所以，请你合理使用内存。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/C/">C</a>►<a class="article-category-link" href="/categories/C/C-%E8%AF%AD%E6%B3%95/">C.语法</a>►<a class="article-category-link" href="/categories/C/C-%E8%AF%AD%E6%B3%95/C-%E8%AF%AD%E6%B3%95-%E6%95%99%E7%A8%8B/">C.语法.教程</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/C/">C</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>



   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/11/22/clang-11-matrix-array/" title="C 语言语法系列（11）：二维数组" itemprop="url">C 语言语法系列（11）：二维数组</a>
    
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="向向" target="_blank" itemprop="author">向向</a>
		
  <p class="article-time">
    <time datetime="2019-11-22T06:57:39.000Z" itemprop="datePublished"> 发表于 2019-11-22</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>前文我们讲到了一维数组的基本赋值方式和使用方式，但基本上我们可以看到，如果不是迫不得已的情况下，貌似一维数组已经够用了，不过为了教程的完整性，我们还是把一些其它情况，必须要更高维的数组的时候，它们的语法格式讲一下。今天说的是二维数组。</p>
<h2 id="二维数组的定义"><a href="#二维数组的定义" class="headerlink" title="二维数组的定义"></a>二维数组的定义</h2><p>当我们在人为定义的情况下必须要使用两个维度（行和列）的时候，就不得不使用二维数组来定义，比如一个表格。比如，我们需要一个 3 行 4 列的表格，它的定义方式是这样的：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> table[<span class="number">3</span>][<span class="number">4</span>];</span><br></pre></td></tr></table></figure>
<p>此时，我们需要在定义语句里写上两个中括号，一个表示行，一个表示列。这个地方的定义就表示一个二维数组是 3 行 4 列的。同时请你继续注意的地方是，这里的中括号是定义语句里用的，所以它表示这个数组是多少行多少列的，而并非取出第 3 行第 4 列的数据。请你注意这一点。</p>
<blockquote>
<p>你也可以理解为，<code>table</code> 变量一共有三个元素构成，每一个元素都是一个需要 4 个元素的数组构成的一维数组序列。所以这种理解方式更类似于“是一个一维数组，只是每一个数据的类型是一个一维数组，即数组的数组”。</p>
</blockquote>
<h2 id="初始化赋值"><a href="#初始化赋值" class="headerlink" title="初始化赋值"></a>初始化赋值</h2><p>在二维数组里，初始化赋值就比较麻烦了。比如，一种简单的赋值方式是采取“数组的数组”的理解方式来赋值的，比如这样：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> table[<span class="number">3</span>][<span class="number">4</span>] =</span><br><span class="line">&#123;</span><br><span class="line">    &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">8</span> &#125;,</span><br><span class="line">    &#123; <span class="number">2</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">16</span> &#125;,</span><br><span class="line">    &#123; <span class="number">4</span>, <span class="number">8</span>, <span class="number">16</span>, <span class="number">32</span> &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>即存放了三个元素，且每一个元素都是一个<strong>存四个 <code>int</code> 类型元素的一维数组</strong>的二维数组。和前文一样，二维数组当完整赋值后，可以不写出元素个数。但在二维数组里，只能省略行元素总数 3，而不可以省略列元素的总个数 4，即：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> table[][<span class="number">4</span>] =</span><br><span class="line">&#123;</span><br><span class="line">    &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">8</span> &#125;,</span><br><span class="line">    &#123; <span class="number">2</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">16</span> &#125;,</span><br><span class="line">    &#123; <span class="number">4</span>, <span class="number">8</span>, <span class="number">16</span>, <span class="number">32</span> &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>注意，这种设计是为了保证后续可以完整取出具体位置的元素而设计的。</p>
<blockquote>
<p>数组在内存里的表达实际上都是一个一维数组。显然，内存是一个长条分布的形状，所以不管多少维度的数组，哪怕后面用到的更高维度的数组，在内存里都只可能表示成一个一维的数组形式，而一个二维数组需要列元素的个数这一个信息来正确分割整个数组，来保证二维数组的成立。如果你省略了列元素的个数，我们就无法在正确的地方断开这个数组，进而得不到正确结果。比如，一个数组拥有 12 个元素（3 行 4 列），那么它在内存里只能表示成这样：</p>
<p><img src="2d-array.png" alt=""></p>
<p>这个表达形式可以看到，我们为一个一维数组进行正确的定界是必须要<strong>列元素数</strong>这个信息的。所以列元素总数这个数字是不可以省略的。</p>
</blockquote>
<p>另外，二维数组也可以省略一些元素的赋值，此时将会默认赋值 0：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> table[][<span class="number">4</span>] =</span><br><span class="line">&#123;</span><br><span class="line">    &#123; <span class="number">1</span> &#125;,</span><br><span class="line">    &#123; <span class="number">2</span>, <span class="number">3</span> &#125;,</span><br><span class="line">    &#123; <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span> &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>这样的话，整个数组的赋值的情况就是</p>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>第 0 列</th>
<th>第 1 列</th>
<th>第 2 列</th>
<th>第 3 列</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>第 0 行</strong></td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td><strong>第 1 行</strong></td>
<td>2</td>
<td>3</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td><strong>第 2 行</strong></td>
<td>4</td>
<td>5</td>
<td>6</td>
<td>7</td>
</tr>
</tbody>
</table>
</div>
<p>当然，内部的大括号都可以被省略，但这个时候就不能省略中间的元素了：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> table[][<span class="number">4</span>] = &#123; <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span> &#125;;</span><br></pre></td></tr></table></figure>
<p>和上面的逻辑一样，这个赋值方式依然是满足要求的，这样就可以看出赋值语句里<strong>列元素数</strong>这个信息的重要性了。</p>
<p>当然，它也可以不完全赋值：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> table[][<span class="number">4</span>] = &#123; <span class="number">2</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">16</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">5</span> &#125;;</span><br></pre></td></tr></table></figure>
<p>那么，从第十个元素开始（从 0 开始算就是第 9 号元素）都被赋值为 0。</p>
<h2 id="二维数组存取数值"><a href="#二维数组存取数值" class="headerlink" title="二维数组存取数值"></a>二维数组存取数值</h2><p>按照 C 语言的规定，数组的索引从 0 开始（所谓的索引，就是取值和存值的那个中括号里的数值，它可以表示这个数组的第几个元素，这个数就是<strong>索引</strong>，有时候也称为<strong>下标</strong>，Index），所以二维数组的两个维度都是从 0 开始。</p>
<p>不过，二维数组需要两个索引，一个行索引，一个列索引：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> table[][<span class="number">4</span>] =</span><br><span class="line">&#123;</span><br><span class="line">    &#123; <span class="number">1</span> &#125;,</span><br><span class="line">    &#123; <span class="number">2</span>, <span class="number">3</span> &#125;,</span><br><span class="line">    &#123; <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span> &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>那么，要取出第 10 个元素 5，应如何写呢？</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> value = table[<span class="number">2</span>][<span class="number">1</span>];</span><br></pre></td></tr></table></figure>
<p>即第 2 行第 1 列的元素（注意，这个索引数值是从 0 开始，所以第 2 行就是我们人为理解的第三行，而第 1 列就是我们理解的第二列），第三行第二列就是 5 了。</p>
<p>另外，初始化赋值可以这么写：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i, j;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        table[i][j] = i * <span class="number">4</span> + j + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样，整个数组的元素就被赋值为从 1 到 12 了，依然请你注意 <code>for</code> 循环的条件 <code>i &lt; 3</code> 和 <code>j &lt; 4</code>。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/C/">C</a>►<a class="article-category-link" href="/categories/C/C-%E8%AF%AD%E6%B3%95/">C.语法</a>►<a class="article-category-link" href="/categories/C/C-%E8%AF%AD%E6%B3%95/C-%E8%AF%AD%E6%B3%95-%E6%95%99%E7%A8%8B/">C.语法.教程</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/C/">C</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>



   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/11/22/clang-10-linear-array/" title="C 语言语法系列（10）：一维数组" itemprop="url">C 语言语法系列（10）：一维数组</a>
    
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="向向" target="_blank" itemprop="author">向向</a>
		
  <p class="article-time">
    <time datetime="2019-11-22T06:46:35.000Z" itemprop="datePublished"> 发表于 2019-11-22</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="数组是什么？"><a href="#数组是什么？" class="headerlink" title="数组是什么？"></a>数组是什么？</h2><p>在前文的知识点里，我们描述了很多有关重复性的内容，例如 C 语言提供的三大循环语句：<code>while</code>、<code>do-while</code> 和 <code>for</code> 循环，还谈论了 <code>for</code> 的各种“奇葩”用法。今天要讲的重复性内容，并非针对执行操作，而是针对于数值存储。</p>
<p>试想一下，如果我们需要大量信息，而且它们需要的内容的类型近乎一致。比如我们要存储 50 个学生的数学成绩，如果我们单纯使用 50 个变量的话，显然是不好读也不好取。那么，有没有办法解决呢？有，这便是我们今天要说到的新的知识点：<strong>数组</strong>（Array）。</p>
<h2 id="数组的定义"><a href="#数组的定义" class="headerlink" title="数组的定义"></a>数组的定义</h2><p>数组有<strong>类型</strong>（Type）一说，有<strong>维度</strong>（Rank）一说，也有<strong>长度</strong>（Length）一说，这是在初始定义的时候为其决定的，这类似于变量的定义。语法约定是这样的：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> scores[<span class="number">50</span>];</span><br></pre></td></tr></table></figure>
<p>这样便定义了一个数组（有时候也把数组直接叫做数组变量），这个数组一共存放 50 个元素，且全部都是 <code>int</code> 类型的元素。</p>
<p>数组一共具有三大属性：类型、维度和长度，那么针对于这个数组变量而言，它的类型是 <code>int</code>，维度是一维的，而长度是 50（即总元素个数）。所谓的维度，就是数组整体呈现几个维度的形式。我们今天讲的内容都是一维数组，即只有一个维度。</p>
<h2 id="数组的赋值"><a href="#数组的赋值" class="headerlink" title="数组的赋值"></a>数组的赋值</h2><p>数组赋值有两种操作，一种是自定义数据，在初始化的方式赋值，还有一种是后续赋值，后续赋值就需要借助循环语句来实现，因为它是采用的逐个元素的赋值的逻辑。</p>
<h3 id="初始化赋值"><a href="#初始化赋值" class="headerlink" title="初始化赋值"></a>初始化赋值</h3><p>初始化赋值方式是在定义语句上直接使用赋值符号 <code>=</code> 和一个大括号表示的集合序列来赋值的。</p>
<blockquote>
<p>下面为了简化赋值，这里把 50 个元素更改为 10 个元素的数组，进行赋值。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> scores[<span class="number">10</span>] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">16</span>, <span class="number">32</span>, <span class="number">64</span>, <span class="number">128</span>, <span class="number">256</span>, <span class="number">512</span>, <span class="number">1024</span> &#125;;</span><br></pre></td></tr></table></figure>
<p>这样的赋值操作是逐个对应的。这个 <code>scores</code> 数组的第一个元素数值是 1，第二个元素是 2，第三个是 4，第四个是 8，以此类推。</p>
<p>如果你赋值的数值过多，编译器层面就会报错，提示你不遵循语法规则，exe 的文件都不会让你成功生成。</p>
<p>不过，元素如果不够 10 个的话，赋值是成功的，也是不会出错的，但是剩余的元素都会被默认赋值为 0。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> scores[<span class="number">10</span>] = &#123; <span class="number">3</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">12</span> &#125;;</span><br></pre></td></tr></table></figure>
<p>这表示 <code>scores</code> 数组里最后 6 个元素全部为 0。</p>
<p>但请注意。如果初始化不给出大括号的赋值语句，这个数组就是空的，即没有赋值的状态。如果在没有初始化的情况就在使用这个数组的话，就会容易出现程序崩溃的错误。所以请尽量避免这个操作。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> scores[<span class="number">10</span>]; <span class="comment">// Non-assigned state.</span></span><br></pre></td></tr></table></figure>
<p>如果你想把数组全部赋值为 0，可以采用下面两种方式赋值：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">memset</span>(scores, <span class="number">0</span>, <span class="keyword">sizeof</span>(<span class="keyword">int</span>) * <span class="number">10</span>);</span><br></pre></td></tr></table></figure>
<p>这是第一种赋值方式，小括号第一个部分写上数组名称，第二个部分写上赋值的初始值（这里是 0，其它数值需要非常复杂的转换得到，这里不作出讲解），第三个部分写上数组整体占的内存大小。</p>
<p>第二种是用大括号这种熟悉的方式赋值，只需要在大括号里写一个元素 0 即可。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> scores[<span class="number">10</span>] = &#123; <span class="number">0</span> &#125;;</span><br></pre></td></tr></table></figure>
<p>这样就可以了，因为其它没有赋值的部分都会默认赋值为 0，而此时给了第一个元素也赋值为 0，所以相当于就是全部为 0 了。</p>
<blockquote>
<p>在明确赋值元素足够的时候，中括号里的数值可以不写。比如</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> scores[] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">16</span>, <span class="number">32</span>, <span class="number">64</span>, <span class="number">128</span>, <span class="number">256</span>, <span class="number">512</span>, <span class="number">1024</span> &#125;;</span><br></pre></td></tr></table></figure>
<p>就等价于</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> scores[<span class="number">10</span>] = &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">16</span>, <span class="number">32</span>, <span class="number">64</span>, <span class="number">128</span>, <span class="number">256</span>, <span class="number">512</span>, <span class="number">1024</span> &#125;;</span><br></pre></td></tr></table></figure>
<p>中括号里的数值，就等于后面大括号里元素的总个数 10 个。</p>
</blockquote>
<h3 id="后续赋值"><a href="#后续赋值" class="headerlink" title="后续赋值"></a>后续赋值</h3><p>你也可以借用循环语句赋值，但需要讲解存取数组的元素的语法才可以。现在我们来说一下，如何取出数组里的元素，和修改这些元素的值。</p>
<h3 id="数组初始化的长度是否可以用变量表示？"><a href="#数组初始化的长度是否可以用变量表示？" class="headerlink" title="数组初始化的长度是否可以用变量表示？"></a>数组初始化的长度是否可以用变量表示？</h3><p>思考一个问题。我们是否可以用一个变量来表示数组的长度呢？</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;i);</span><br><span class="line"><span class="keyword">int</span> arr[i]; <span class="comment">// Does it work?</span></span><br></pre></td></tr></table></figure>
<p>这么书写，是否表示输入的数值是多少，数组初始化的时候长度就是多少呢？</p>
<p>在 C99 标准之前，这种写法一直都是不被允许的。在考试过程时，一般也不允许这种写法，不过 C99 标准开始允许你这么声明数组，即<strong>可变长数组</strong>（Variable Length Array，简称 <strong>VLA</strong>）。VLA 这种特性是在 C99 标准才引入的，所以如果你需要使用 VLA，考试里则是肯定不允许的。</p>
<h2 id="数组内元素的存取"><a href="#数组内元素的存取" class="headerlink" title="数组内元素的存取"></a>数组内元素的存取</h2><p>前文讲述了如何使用数组进行定义和初始化，它采用的是中括号的方式，写在数组名称的后面，中括号里写上总元素个数来表达。</p>
<p>在存取元素的时候，我们依旧用的是中括号，而且稍微在使用上和初始化里的中括号有一点区别：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> scores[<span class="number">10</span>] = &#123; <span class="number">82</span>, <span class="number">100</span>, <span class="number">96</span>, <span class="number">57</span>, <span class="number">14</span>, <span class="number">99</span>, <span class="number">90</span>, <span class="number">60</span>, <span class="number">68</span>, <span class="number">77</span> &#125;;</span><br></pre></td></tr></table></figure>
<p>我们要取出上述第三个元素的话，请使用 <code>[第几个元素 - 1]</code> 的方式来取值。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> thirdOne = scores[<span class="number">2</span>]; <span class="comment">// thirdOne is assigned 96</span></span><br></pre></td></tr></table></figure>
<p>在 C 语言里，取值是从 0 开始的，并非 1 开始，所以需要你注意数组取值的时候，中括号里写的数值是多少。比如取出第三个元素，则写的是 <code>array[2]</code>，而非 <code>array[3]</code>。</p>
<p>那么，整体使用的格式是这样的：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> scores[] = &#123; <span class="number">82</span>, <span class="number">100</span>, <span class="number">96</span>, <span class="number">57</span>, <span class="number">14</span>, <span class="number">99</span>, <span class="number">90</span>, <span class="number">60</span>, <span class="number">68</span>, <span class="number">77</span> &#125;;</span><br><span class="line">    <span class="keyword">int</span> thirdOne = scores[<span class="number">2</span>]; <span class="comment">// thirdOne is assigned 96</span></span><br><span class="line">    </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, thirdOne);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个程序将会输出 96。</p>
<p>下面就可以说下后续赋值的方式了。</p>
<p>由于我们学习了循环语句，所以我们可以采用方便 <code>for</code> 循环为其赋值。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> arr[<span class="number">10</span>];</span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    arr[i] = i + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>请注意，数组赋值用到了 <code>for</code> 循环，而我们之前说过，取值的中括号里写的数字是从 0 开始算的，所以最大的元素值是 9（因为 0 到 9 一共是 10 个元素了），所以初始化赋值的时候 <code>i = 0</code> 而不是 <code>i = 1</code>，因为这个 <code>i</code> 就是表示这个中括号里的数值的；而条件写的是 <code>i &lt; 10</code> 而不是 <code>i &lt;= 10</code>。</p>
<p>而上述逻辑里的 <code>arr[i]</code> 就表示 <code>arr</code> 数组的第 <code>i + 1</code> 个元素。比如 <code>i</code> 是 6，则 <code>arr[i]</code> 就表示的是第七个元素，因为从 0 开始计算。而最终执行完毕这个 <code>for</code> 后，整个数组的数值就是 1、2、3、4、5、6、7、8、9、10 了。</p>
<p>当然，你还可以为其进行手动赋值：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> arr[<span class="number">10</span>] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">arr[<span class="number">1</span>] = <span class="number">3</span>;</span><br><span class="line">arr[<span class="number">6</span>] = <span class="number">8</span>;</span><br><span class="line">arr[<span class="number">9</span>] = <span class="number">14</span>;</span><br></pre></td></tr></table></figure>
<p>这样就可以为这个数组的第 2、7、10 个元素赋值 3、8 和 14，而其余元素的数值都会被默认初始化为 0。</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/C/">C</a>►<a class="article-category-link" href="/categories/C/C-%E8%AF%AD%E6%B3%95/">C.语法</a>►<a class="article-category-link" href="/categories/C/C-%E8%AF%AD%E6%B3%95/C-%E8%AF%AD%E6%B3%95-%E6%95%99%E7%A8%8B/">C.语法.教程</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/C/">C</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>



   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/11/22/clang-09-jumping-clause/" title="C 语言语法系列（9）：跳转语句" itemprop="url">C 语言语法系列（9）：跳转语句</a>
    
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="向向" target="_blank" itemprop="author">向向</a>
		
  <p class="article-time">
    <time datetime="2019-11-22T05:44:57.000Z" itemprop="datePublished"> 发表于 2019-11-22</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>还记得前文学到的质数判断和嵌套循环吗？前文遇到了一个例子，我们尝试跳出循环，但发现知识不足以让我们在期间跳出循环的执行，所以我们在那个时候无能为力，好在这个思路并不会使得代码的逻辑变成错的，它仅仅涉及到代码执行的优化。</p>
<p>今天的内容，我们将会处理这些特殊的处理。我们一共要学习三种语句模式：“<code>break</code> 语句”、“<code>continue</code> 语句”和“标签 + <code>goto</code> 语句”模型。</p>
<h2 id="break-语句：跳出循环"><a href="#break-语句：跳出循环" class="headerlink" title="break 语句：跳出循环"></a><code>break</code> 语句：跳出循环</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (n &lt;= digit - <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">    remainder = digit % n;</span><br><span class="line">    <span class="keyword">if</span> (remainder == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// This is not a prime number.</span></span><br><span class="line">        isPrime = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">break</span>; <span class="comment">// Jump out of the loop.</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    n++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>我们省略了一些代码，只关注于循环语句，和 <code>break</code> 语句。<code>break</code> 语句是单独有分号结尾的，否则它将只是一个关键字。</p>
<p>在执行循环的时候，如果发现它已经不是质数了，就没必要再往下执行后面的判断是否除尽的逻辑了，于是在这里就跳出循环，所以写在应当跳出循环的位置上。</p>
<blockquote>
<p>很多小伙伴在初学这个语句的时候，以为它可以跳出 <code>if</code> 条件。请注意，<code>break</code> 语句是只跟包含它的这层循环有关，它仅能跳出一层循环。也就是说，如果有两个 <code>while</code> 循环，如果把 <code>break</code> 语句写在最里面，那么它也只能跳出最内层的循环，而靠外的这一层循环依旧会继续往下执行，比如原本的例子：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (digit = <span class="number">2</span>; digit &lt;= <span class="number">100</span>; digit++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (n = <span class="number">2</span>, isPrime = <span class="number">1</span>; n &lt;= digit - <span class="number">1</span>; n++)</span><br><span class="line">    &#123;</span><br><span class="line">        remainder = digit % n;</span><br><span class="line">        <span class="keyword">if</span> (remainder == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// This is not a prime number.</span></span><br><span class="line">            isPrime = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">break</span>; <span class="comment">// Here break the inner loop.</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Break clause will lead the execution to jump to here.</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (isPrime)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, digit);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个 <code>break</code> 语句只能让语句跳转到第 14 行继续执行，所以下方的 <code>isPrime</code> 的判断条件它照样要走。所以这么考虑起来，这个 <code>break</code> 语句的跳转逻辑是没有问题的。</p>
</blockquote>
<h2 id="continue-语句：执行下一次循环"><a href="#continue-语句：执行下一次循环" class="headerlink" title="continue 语句：执行下一次循环"></a><code>continue</code> 语句：执行下一次循环</h2><p>要说 <code>break</code> 语句是跳出循环，那么和它写法类似的 <code>continue</code> 语句就不是这个行为了。<code>continue</code> 语句直接终结当前这一次循环的执行逻辑，直接跳转到循环的开头去判断条件（而 <code>for</code> 循环则跳转到增量处）。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">for</span> (n = <span class="number">1</span>; n &lt;= <span class="number">10</span>; n++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (n % <span class="number">3</span> == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d "</span>, n);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述示例给出了一个从 1 到 10 的循环。当循环执行的过程中发现 n 本身被 3 整除，就会自动跳转到 <code>n++</code> 增量语句处执行，而不会遇到 <code>printf(&quot;%d &quot;, n);</code> 语句。这个示例展示了如何输出不是 3 的整倍数的代码。</p>
<p>它和 <code>break</code> 语句不一样的地方在于，<code>continue</code> 不会退出代码，而是跳转到增量（<code>for</code> 循环）或条件（<code>while</code> 或 <code>do-while</code> 循环）处执行。</p>
<h2 id="goto-语句：跳转到任意的执行位置"><a href="#goto-语句：跳转到任意的执行位置" class="headerlink" title="goto 语句：跳转到任意的执行位置"></a><code>goto</code> 语句：跳转到任意的执行位置</h2><h3 id="用-goto-代替循环"><a href="#用-goto-代替循环" class="headerlink" title="用 goto 代替循环"></a>用 <code>goto</code> 代替循环</h3><p>最为灵活的语句非 <code>goto</code> 语句莫属，它可以跳转到程序的任意你想要到达的位置上去（当然，在 <code>main</code> 函数外面去是不可以的）。</p>
<p>考虑如下行为。如果我们没有循环的时候，我们可以尝试使用 <code>goto</code> 来达到循环的目的。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = <span class="number">1</span>, sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">Loop:</span><br><span class="line"><span class="keyword">if</span> (i &lt;= <span class="number">100</span>)</span><br><span class="line">&#123;</span><br><span class="line">    sum += i;</span><br><span class="line">    i++;</span><br><span class="line">    <span class="keyword">goto</span> Loop; <span class="comment">// Return to the label `Loop`.</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述示例将会输出从 1 到 100 内的数字的和。当执行到条件满足时，将会自动统计结果，并跳转到 <code>Loop</code> 标签处（第 3 行）继续执行代码。直到条件不成立的时候，到 <code>else</code> 部分，输出结果，此时没有 <code>goto</code> 语句，所以会继续往下执行，而不会再返回上面了。</p>
<p>请注意，标签名称的定义依然满足标识符的命名规则（数字、字母、下划线的那些规矩），所以不要乱取名。而且，标签不能位于函数的外面。比如下面的这个示例，就会出现错误：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">Test:</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">goto</span> Test;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"goto\n"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这段代码是会报错的，不是运行的时候出错，而是直接在运行和编译程序之前就会出现错误。</p>
<h3 id="你叫它标签？"><a href="#你叫它标签？" class="headerlink" title="你叫它标签？"></a>你叫它标签？</h3><p>是的，在前文里，使用标识符规则加一个冒号的部分我们称为<strong>标签</strong>（Label）。标签并非任何执行语句，它没有意义，跟注释差不多。但和注释的区别在于，注释在运行的 exe 里不会出现，而标签你可能还会查到这个东西存在的影子。</p>
<p>标签可以控制程序运行的顺序和行为，比如上面正确的那一则例子，它可以控制语句形成一个循环，来达到模拟循环的效果。而且，在前文介绍的 <code>switch</code> 语句也大量使用到了标签。仔细回忆一下，<code>switch</code> 语句配合 <code>case</code> 语句使用，而 <code>case</code> 语句末尾就是用的冒号。是的，<code>case</code> 语句就是一个特殊的标签，它用于规定 <code>switch</code> 小括号里的表达式的结果的分情况处理行为。当都不成立的时候，语句将会跳转到 <code>default</code> 标签处执行。</p>
<p>但可以发现，它并不影响程序的真正运行规范（比如大括号并不会因为标签的行为而断开和分割开），所以请注意，像是 <code>switch</code> 语句或是上面的这样的例子里，我们不能在同一个范围里定义两个名字完全一样的变量。比如说</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = <span class="number">1</span>, sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">Loop:</span><br><span class="line"><span class="keyword">int</span> i = <span class="number">3</span>; <span class="comment">// Wrong here.</span></span><br><span class="line"><span class="keyword">if</span> (i &lt;= <span class="number">100</span>)</span><br><span class="line">&#123;</span><br><span class="line">    sum += i;</span><br><span class="line">    i++;</span><br><span class="line">    <span class="keyword">goto</span> Loop;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, sum);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或是</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">switch</span> (a)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        c = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        c = <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">2</span>; <span class="comment">// Wrong here.</span></span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">        c = <span class="number">4</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">3</span>; <span class="comment">// Also wrong here.</span></span><br><span class="line">        c = <span class="number">8</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        c = <span class="number">16</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>两个例子里，变量在错误的代码处是完全可以看到第一行给出的变量的，所以在可以看到的地方重新定义这些变量是有语义冲突的。</p>
<blockquote>
<p>不过，C 语言允许第 2 种情况的代码，意味着这个代码不会出错，但错误很隐蔽：在 <code>case 3</code> 和 <code>case 5</code> 标签处各定义了一个 <code>i</code> 变量，而这两处的 <code>i</code> 和第 1 行定义的 <code>i</code> 并不是同一个变量，而是两个完全没有关系的变量，只是恰好这里同名了。</p>
<p>我们应尽量避免这种定义行为。</p>
</blockquote>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/C/">C</a>►<a class="article-category-link" href="/categories/C/C-%E8%AF%AD%E6%B3%95/">C.语法</a>►<a class="article-category-link" href="/categories/C/C-%E8%AF%AD%E6%B3%95/C-%E8%AF%AD%E6%B3%95-%E6%95%99%E7%A8%8B/">C.语法.教程</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/C/">C</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>



   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/11/22/clang-08-nested-loop/" title="C 语言语法系列（8）：嵌套的循环" itemprop="url">C 语言语法系列（8）：嵌套的循环</a>
    
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="向向" target="_blank" itemprop="author">向向</a>
		
  <p class="article-time">
    <time datetime="2019-11-22T04:43:34.000Z" itemprop="datePublished"> 发表于 2019-11-22</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="嵌套？"><a href="#嵌套？" class="headerlink" title="嵌套？"></a>嵌套？</h2><p>什么是<strong>嵌套</strong>（Nest）？嵌套是 C 语言和其它众多编程语言里的一个重要的语法术语，它表示执行的控制流语句（<code>if</code>、<code>switch</code>、<code>while</code>、<code>do-while</code> 和 <code>for</code> 语句统称控制流语句，它们控制着整个程序的执行流程：是条件判断来走不同分支，还是反复执行相同的执行语句）的内部继续使用这些控制流语句的写法。比如前文介绍的 <code>if</code> 内还有 <code>if</code> 的情况：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">int</span> j;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (i == <span class="number">2</span>)</span><br><span class="line">&#123;</span><br><span class="line">    j = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (i &lt; <span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        j = <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        j = <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>比如这个写法格式里的 <code>j</code> 的结果是 3，它先走了 <code>i == 2</code> 这个 <code>if</code> 条件的 <code>else</code> 部分，然后发现它也不满足 <code>i &lt; 2</code> 的情况，所以它最终走了 <code>i &lt; 2</code> 这个 <code>if</code> 条件里的 <code>else</code> 部分，获得了 <code>j = 3</code> 的赋值。</p>
<p>很有意思的是，循环也是可以嵌套使用的。正因为如此，循环和条件判断的各种语句才会产生各种不同的组合模式，产生不同的代码书写技巧，比如<strong>枚举法</strong>（Enumeration）。不过，我们先要介绍，代码到底是怎么运算执行嵌套循环的。</p>
<h2 id="实例：质数的判断"><a href="#实例：质数的判断" class="headerlink" title="实例：质数的判断"></a>实例：质数的判断</h2><p>最好理解的、最基础的例子就是求质数了。</p>
<p>质数的定义是，在把一个大于等于 2 的整数分解为多个正整数的乘积时，如果只能分解为 <code>1 × 自己</code> 的话，这个数就是<strong>质数</strong>（也称<strong>素数</strong>，Prime），一般常见的质数有 2、3、5、7、11、13、17、19 等。</p>
<p>现在我们尝试输出所有 100 以内的所有质数。我们的代码怎么写呢？</p>
<h3 id="先实现判别质数的功能"><a href="#先实现判别质数的功能" class="headerlink" title="先实现判别质数的功能"></a>先实现判别质数的功能</h3><p>首先，我们尝试用爆破的方式，对一个整数尝试进行挨个数字的试除。如果这个整数无法被整除掉，说明它只能被 1 整除掉，故这个数肯定就是质数了。比如，我们要计算 17 是否是质数（即使我们背了表，知道它是质数），逻辑大致就是从 2 开始，一直计算到 16（17 除以 17 显然等于 1，所以这个除法已经没有意义了，所以我们只要求计算到 16 即可），让 17 挨个去除以这个数，如果每一次除法得到的结果都不能被整除，说明这个数肯定就是质数了）：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> digit = <span class="number">17</span>, n = <span class="number">2</span>, remainder;</span><br><span class="line"><span class="keyword">int</span> isPrime = <span class="number">1</span>; <span class="comment">// 1 means `digit` is a prime, 0 means not.</span></span><br><span class="line"><span class="keyword">while</span> (n &lt;= digit - <span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">    remainder = digit % n;</span><br><span class="line">    <span class="keyword">if</span> (remainder == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// This is not a prime number.</span></span><br><span class="line">        isPrime = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    n++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (isPrime) <span class="comment">// Equi to condition `isPrime != 0`</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d is a prime.\n"</span>, digit);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d is not a prime.\n"</span>, digit);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们来大致看下逻辑。首先，我们为需要用到的条件进行变量的声明（定义），然后设置一个结果量 <code>isPrime</code>，来表示它是否是质数（1 表示这个数是质数，0 表示这个数不是质数）。</p>
<p>然后考虑 <code>while</code> 循环里的内容。我们肯定要让 <code>n</code> 从 2 计算到 <code>digit - 1</code>，然后尝试记录每一次试除得到的余数 <code>remainder</code>。记录余数有什么用呢？在 C 语言里，判断一个数是否能被整除，用的方法是得到余数，看余数是否为 0。比如 <code>12 % 2</code> 的结果为 0，因为 12 是可以整除 2 的。</p>
<p>如果 <code>remainder</code> 为 0，说明被整除了。在除法过程里得到完全整除的现象，就标志着这个数肯定就不是质数了。比如在计算 15（<code>digit</code> 是 15）的时候，如果 <code>n</code> 此时是 3，那么 <code>remainder</code> 就是 0 了，所以 <code>digit</code> 不是质数，我们需要将结果量 <code>isPrime</code> 改为 0。 标志着这个数肯定不是质数了。</p>
<blockquote>
<p>不过，如果在得到 <code>remainder</code> 为 0 的情况时，就标志着这个数不是质数了。既然它已经肯定不是质数了，所以此时就不必再往下算了，所以我们此时想要尝试跳到循环外面，继续执行下面的语句。不过，我们目前还没有讲解这一点，所以我们先不考虑这一点的优化。哪怕后面再次遇到余数 0 的情况，因为循环里只有对 <code>isPrime = 0</code> 的赋值，所以局面完全不可能被反转，即 <code>isPrime</code> 完全不可能被重新改为 1，所以大不了多几次被赋值为 0 罢了。</p>
<p>另外，循环条件其实也可以优化，不过为了逻辑的清晰易懂，所以这里我们不提及任何有关优化的部分。</p>
</blockquote>
<p>当试除循环执行完毕，发现 <code>isPrime</code> 还是为初始赋值的情况 1，就说明在我们试除的循环里完全没有遇到余数为 0，即被整除的情况。所以这个数 <code>digit</code> 应为质数，所以我们认为这个数就是质数，输出 <code>digit</code> 是一个质数的信息，反之输出不是质数的信息。</p>
<p>所以，前面给出的算法逻辑是完整的、正确的。</p>
<h3 id="为遍历-2-到-100-写一层循环"><a href="#为遍历-2-到-100-写一层循环" class="headerlink" title="为遍历 2 到 100 写一层循环"></a>为遍历 2 到 100 写一层循环</h3><p>那么，我们既然做出了这个模块，那么，要想输出所有质数的信息，只需要把最后 <code>isPrime</code> 的判断的 <code>if</code> 条件去掉 <code>else</code> 部分，然后把输出语句改为直接输出这个数字，最后再在整个执行流程的外部加入一个 <code>while</code> 循环，计算 2 到 100 的所有数字即可。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> digit = <span class="number">2</span>, n, remainder;</span><br><span class="line"><span class="keyword">int</span> isPrime; <span class="comment">// 1 means `digit` is a prime, 0 means not.</span></span><br><span class="line"><span class="keyword">while</span> (digit &lt;= <span class="number">100</span>) <span class="comment">// Add this while-loop.</span></span><br><span class="line">&#123;</span><br><span class="line">    n = <span class="number">2</span>; <span class="comment">// Re-assign this variable.</span></span><br><span class="line">    isPrime = <span class="number">1</span>; <span class="comment">// Re-assign this variable.</span></span><br><span class="line">    </span><br><span class="line">    <span class="meta">#<span class="meta-keyword">pragma</span> region Old code</span></span><br><span class="line">    <span class="keyword">while</span> (n &lt;= digit - <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        remainder = digit % n;</span><br><span class="line">        <span class="keyword">if</span> (remainder == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// This is not a prime number.</span></span><br><span class="line">            isPrime = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        n++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (isPrime)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, digit);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="meta-keyword">pragma</span> endregion</span></span><br><span class="line"></span><br><span class="line">    digit++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以看到，<code>Old code</code> 代码块里面的这一大堆代码都是前文用过的代码，被我原封不动地复制过来了。我们把 <code>digit</code> 从 17 改为了 2。因为我们这个题目的真正目的是为了遍历前面 100 个正整数，而 0 和 1 既不是质数也不是合数，所以我们直接从 2 开始计算。</p>
<p>然后，程序执行到 <code>digit &lt;= 100</code> 时，显然满足条件，所以进入到循环里。然后为 <code>n</code> 和 <code>isPrime</code> 进行初始化的赋值。然后进入之前的判断质数的代码块里。如果 <code>digit</code> 是质数，则肯定会进入到上述代码第 23 行代码里，并输出这个数字，然后紧跟一个空格，为了保证后面可能会输出的数字会和这个当前数字之间有一个空格的分隔。</p>
<p>然后，最后到达第 27 行代码，<code>digit</code> 会增大一个单位，比如 <code>digit</code> 从 2 变为 3，整个循环执行完毕。接着，倒回 <code>digit &lt;= 100</code> 的条件处判断。显然，它还是满足要求，所以重新进入到循环里。然后又一次对 <code>n</code> 和 <code>isPrime</code> 执行初始化的赋值。</p>
<blockquote>
<p>实际上，从这里就可以看出来，把这两句初始赋值写在循环里的原因。因为每一个不同的数字判断是否是质数的时候，都采用的是 <code>n</code> 和 <code>isPrime</code> 两个变量。重新赋值初始值是为了避免计算过后，更改了这两个变量的数值，而我们没有重新修正数值，就会影响到程序执行，并出现没有达到预期结果的 bug。</p>
</blockquote>
<p>可以看到，这一则实例用到了两层 <code>while</code> 循环，外层 <code>while</code> 循环表示的意思是，想要从 2 计算到 100，把每一个数字都判断一遍，它们是否是质数；而内层的 <code>while</code> 循环在这里表示的意思是，尝试把外层循环得到的当前需要计算的数字 <code>digit</code> 去逐个用 2 开始试除，看看这个数是否能被内层循环得到的这个数字所除尽。</p>
<h2 id="其它循环的嵌套"><a href="#其它循环的嵌套" class="headerlink" title="其它循环的嵌套"></a>其它循环的嵌套</h2><h3 id="for-循环的嵌套"><a href="#for-循环的嵌套" class="headerlink" title="for 循环的嵌套"></a><code>for</code> 循环的嵌套</h3><p><code>while</code> 循环的嵌套还是很简单的，不过 <code>for</code> 循环嵌套的理解难点就在于它的小括号的三个部分的执行顺序。只要你不要忘了 <code>for</code> 循环的执行顺序：初始值、条件、循环体、增量、条件、循环体、增量、条件、循环体、增量……</p>
<p>例如上述逻辑，就可以改写为如下的代码格式：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> digit = <span class="number">2</span>, n, remainder;</span><br><span class="line"><span class="keyword">int</span> isPrime; <span class="comment">// 1 means `digit` is a prime, 0 means not.</span></span><br><span class="line"><span class="keyword">for</span> (digit = <span class="number">2</span>; digit &lt;= <span class="number">100</span>; digit++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (n = <span class="number">2</span>, isPrime = <span class="number">1</span>; n &lt;= digit - <span class="number">1</span>; n++)</span><br><span class="line">    &#123;</span><br><span class="line">        remainder = digit % n;</span><br><span class="line">        <span class="keyword">if</span> (remainder == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// This is not a prime number.</span></span><br><span class="line">            isPrime = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (isPrime)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, digit);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实际上，改写代码后，代码量更少了，逻辑也清晰了，只是代码可能会稍微难理解一些。但只要你每一步按部就班地来，就不会出现逻辑执行的顺序错误。</p>
<h3 id="do-while-循环的嵌套"><a href="#do-while-循环的嵌套" class="headerlink" title="do-while 循环的嵌套"></a><code>do-while</code> 循环的嵌套</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = <span class="number">1</span>, j;</span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line">    j = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"*"</span>);</span><br><span class="line">        j++;</span><br><span class="line">    &#125; <span class="keyword">while</span> (j &lt;= i);</span><br><span class="line">    </span><br><span class="line">    i++;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125; <span class="keyword">while</span> (i &lt;= <span class="number">5</span>);</span><br></pre></td></tr></table></figure>
<p>用得最少的就是 <code>do-while</code> 循环了，所以它的嵌套很多时候，虽然简单，但难理解。不过一般我们都用不上，所以这里就随便举了个例，然后改写成 <code>do-while</code> 循环书写。</p>
<p>这个例子的输出结果是</p>
<script type="math/tex; mode=display">
\begin{matrix}
\text{*}\\
\text{*} & \text{*}\\
\text{*} & \text{*} & \text{*}\\
\text{*} & \text{*} & \text{*} & \text{*}\\
\text{*} & \text{*} & \text{*} & \text{*} & \text{*}\\
\end{matrix}</script><h2 id="循环语句的大括号省略"><a href="#循环语句的大括号省略" class="headerlink" title="循环语句的大括号省略"></a>循环语句的大括号省略</h2><p>和 <code>if</code> 语句一样，当执行循环的语句部分只有一句话的时候，我们可以去掉大括号不写，比如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i, sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++)</span><br><span class="line">    sum += i;</span><br></pre></td></tr></table></figure>
<p>它等价于</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i, sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    sum += i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>当然，一个大括号也被视为一句话，所以如果 <code>for</code> 循环嵌套了例如 <code>if</code> 和大括号，或者 <code>if-else</code> 语句的话，这种形式也可以不要外层的大括号。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i, sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        sum += i;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>可以简写为</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i, sum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++)</span><br><span class="line">    <span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">        sum += i;</span><br></pre></td></tr></table></figure>
<p>只要你觉得看起来条理清晰的时候，就可以这么书写。</p>
<h2 id="编码技巧：枚举法"><a href="#编码技巧：枚举法" class="headerlink" title="编码技巧：枚举法"></a>编码技巧：枚举法</h2><p>枚举法就是采用大量循环的嵌套，来枚举出每一个循环的执行逻辑的一种情况，然后挨个判断条件是否满足的逻辑。这种逻辑虽然很暴力，但枚举出的所有情况保证了程序执行的正确性。</p>
<p>想必很多人听说过水仙花数字，它是一个三位数，每一个位置的数字的三次方的和，等于它自己的数字。我们既然找不到解决方式，就干脆枚举每一个情况，让每一个变量表示这个数的每一个位置，大不了用三个变量 <code>a</code>、<code>b</code> 和 <code>c</code> 表示百位、十位和个位。不过要注意，<code>a</code> 作为百位数，是不可能为 0 的，否则它就不是一个合理的三位数了。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (a = <span class="number">1</span>; a &lt;= <span class="number">9</span>; a++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (b = <span class="number">0</span>; b &lt;= <span class="number">9</span>; b++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (c = <span class="number">0</span>; c &lt;= <span class="number">9</span>; c++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> digit = a * <span class="number">100</span> + b * <span class="number">10</span> + c;</span><br><span class="line">            <span class="keyword">if</span> (a * a * a + b + b * b + c * c * c == digit)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// Okay.</span></span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d "</span>, digit);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我相信，这样的书写模式一定会让你对多重循环有一个更好的认知：首先进入 <code>a = 1</code> 的初始值赋值，然后显然满足条件，进入 <code>b = 0</code> 的初始赋值，显然满足条件，所以进入最内层的循环，<code>c = 0</code> 的初始值和条件。</p>
<p>然后全部满足，所以我们开始整合这个整数，把每一个整数合并起来变为一个整数。然后尝试对这三个数字 <code>a</code>、<code>b</code> 和 <code>c</code> 执行三次方计算再求和。如果它等于 <code>digit</code>，便满足条件，所以此时就算满足了水仙花数的要求，输出它即可。否则，我们就计算下一次循环。注意，此时循环还在最内层，所以执行完毕这一次循环的时候，应该走增量 <code>c++</code> 的这个部分，此时 <code>c</code> 表示的个位变为 1。然后再判断条件 <code>c &lt;= 9</code>。满足条件，进入循环，再一次判断条件是否满足。</p>
<p>直到 <code>c</code> 计算到 9 的时候，增量使得 <code>c</code> 变为 10，此时条件不满足。于是整个最内层的 <code>for</code> 循环执行完毕，发现它被包含在 <code>b</code> 计算的循环的这坨循环里，而这坨循环里只有关于 <code>c</code> 变量的循环一个部分，所以这便意味着 <code>b</code> 循环执行完一次操作，此时 <code>b</code> 才会增大一个单位（进入 <code>b++</code> 增量，使之变为 1）。然后再次进入 <code>c = 0</code> 的初始赋值处。</p>
<p>如果用人为的逻辑理解的话，就是把它们三个整理为 100、101、102、103、……、109、110、111、……、999 的顺序执行每一个数字。</p>
<p>大致逻辑如下：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (第一个维度)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (第二个维度)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (第三个维度)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// 还可以有更多层次的循环。</span></span><br><span class="line">            ...</span><br><span class="line">            <span class="keyword">if</span> (条件)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// 条件满足。</span></span><br><span class="line">                调用 <span class="built_in">printf</span> 函数输出结果。</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="一些练习"><a href="#一些练习" class="headerlink" title="一些练习"></a>一些练习</h2><p>嵌套循环还需要多多练习和巩固，因为它看起来简单，实际上每一步执行起来还是费工夫的。所以我们来一些练习，希望你们能够明白和看懂它们的执行。</p>
<h3 id="方阵"><a href="#方阵" class="headerlink" title="方阵"></a>方阵</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= <span class="number">5</span>; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"* "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>将会输出一个星星矩阵：</p>
<script type="math/tex; mode=display">
\begin{matrix}
\text{*} & \text{*} & \text{*} & \text{*} & \text{*}\\
\text{*} & \text{*} & \text{*} & \text{*} & \text{*}\\
\text{*} & \text{*} & \text{*} & \text{*} & \text{*}\\
\text{*} & \text{*} & \text{*} & \text{*} & \text{*}\\
\text{*} & \text{*} & \text{*} & \text{*} & \text{*}
\end{matrix}</script><h3 id="左上三角"><a href="#左上三角" class="headerlink" title="左上三角"></a>左上三角</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= <span class="number">6</span> - i; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"* "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>将会是一个左上三角：</p>
<script type="math/tex; mode=display">
\begin{matrix}
\text{*} & \text{*} & \text{*} & \text{*} & \text{*}\\
\text{*} & \text{*} & \text{*} & \text{*}\\
\text{*} & \text{*} & \text{*}\\
\text{*} & \text{*}\\
\text{*}
\end{matrix}</script><h3 id="左下三角"><a href="#左下三角" class="headerlink" title="左下三角"></a>左下三角</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= i; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"* "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>将会是一个左下三角：</p>
<script type="math/tex; mode=display">
\begin{matrix}
\text{*} &\\
\text{*} & \text{*}\\
\text{*} & \text{*} & \text{*}\\
\text{*} & \text{*} & \text{*} & \text{*}\\
\text{*} & \text{*} & \text{*} & \text{*} & \text{*}
\end{matrix}</script><h3 id="右上三角"><a href="#右上三角" class="headerlink" title="右上三角"></a>右上三角</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt; i; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"  "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= <span class="number">6</span> - i; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"* "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>将会是一个右上三角：</p>
<script type="math/tex; mode=display">
\begin{matrix}
\text{*} & \text{*} & \text{*} & \text{*} & \text{*}\\
& \text{*} & \text{*} & \text{*} & \text{*}\\
& & \text{*} & \text{*} & \text{*}\\
& & & \text{*} & \text{*}\\
& & & & \text{*}
\end{matrix}</script><h3 id="九九乘法表"><a href="#九九乘法表" class="headerlink" title="九九乘法表"></a>九九乘法表</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= <span class="number">9</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= i; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%2d * %2d = %2d"</span>, j, i, i * j);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样便会输出一个九九乘法表：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1*1= 1</span><br><span class="line">1*2= 2 2*2= 4</span><br><span class="line">1*3= 3 2*3= 6 3*3= 9</span><br><span class="line">1*4= 4 2*4= 8 3*4=12 4*4=16</span><br><span class="line">1*5= 5 2*5=10 3*5=15 4*5=20 5*5=25</span><br><span class="line">1*6= 6 2*6=12 3*6=18 4*6=24 5*6=30 6*6=36</span><br><span class="line">1*7= 7 2*7=14 3*7=21 4*7=28 5*7=35 6*7=42 7*7=49</span><br><span class="line">1*8= 8 2*8=16 3*8=24 4*8=32 5*8=40 6*8=48 7*8=56 8*8=64</span><br><span class="line">1*9= 9 2*9=18 3*9=27 4*9=36 5*9=45 6*9=54 7*9=63 8*9=72 9*9=81</span><br></pre></td></tr></table></figure>
<h3 id="菱形"><a href="#菱形" class="headerlink" title="菱形"></a>菱形</h3><p>最难的就是这个例子了。我们尝试输出一个菱形图案。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> <span class="built_in">size</span> = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">1</span>; i &lt;= <span class="built_in">size</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= <span class="built_in">size</span> - i; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"  "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= <span class="number">2</span> * i - <span class="number">1</span>; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"* "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; <span class="built_in">size</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= i; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"  "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= <span class="number">2</span> * (<span class="built_in">size</span> - i) - <span class="number">1</span>; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"* "</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>将会得到一个菱形图案：</p>
<script type="math/tex; mode=display">
\begin{matrix}
& & & & \text{*}\\
& & & \text{*} & \text{*} & \text{*}\\
& & \text{*} & \text{*} & \text{*} & \text{*} & \text{*}\\
& \text{*} & \text{*} & \text{*} & \text{*} & \text{*} & \text{*} & \text{*}\\
\text{*} & \text{*} & \text{*} & \text{*} & \text{*} & \text{*} & \text{*} & \text{*} & \text{*} &\\
& \text{*} & \text{*} & \text{*} & \text{*} & \text{*} & \text{*} & \text{*}\\
& & \text{*} & \text{*} & \text{*} & \text{*} & \text{*}\\
& & & \text{*} & \text{*} & \text{*}\\
& & & & \text{*}
\end{matrix}</script>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/C/">C</a>►<a class="article-category-link" href="/categories/C/C-%E8%AF%AD%E6%B3%95/">C.语法</a>►<a class="article-category-link" href="/categories/C/C-%E8%AF%AD%E6%B3%95/C-%E8%AF%AD%E6%B3%95-%E6%95%99%E7%A8%8B/">C.语法.教程</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/C/">C</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>



   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/11/20/regex-learning/" title="正则表达式基础" itemprop="url">正则表达式基础</a>
    
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="向向" target="_blank" itemprop="author">向向</a>
		
  <p class="article-time">
    <time datetime="2019-11-20T13:51:00.000Z" itemprop="datePublished"> 发表于 2019-11-20</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="什么是正则表达式？"><a href="#什么是正则表达式？" class="headerlink" title="什么是正则表达式？"></a>什么是正则表达式？</h2><blockquote>
<p><strong>正则表达式</strong>（Regular Expression）是一组由字母和符号组成的特殊文本，它可以用来从文本中找出满足你想要的格式的句子。</p>
</blockquote>
<p>一个正则表达式是一种从左到右匹配主体字符串的模式。“Regular expression”这个词比较拗口，我们常使用缩写的术语 <strong>regex</strong> 或 <strong>regexp</strong>。正则表达式可以从一个基础字符串中根据一定的匹配模式替换文本中的字符串、验证表单、提取字符串等等。</p>
<p>想象你正在写一个应用，然后你想设定一个用户命名的规则，让用户名包含字符、数字、下划线和连字符，以及限制字符的个数，好让名字看起来没那么丑。</p>
<p>我们使用以下正则表达式来验证一个用户名：</p>
<p><img src="regexp-cn.png" alt=""></p>
<p>以上的正则表达式可以接受 <code>john_doe</code>、<code>jo-hn_doe</code>、<code>john12_as</code>。 但不匹配<code>Jo</code>，因为它包含了大写的字母而且太短了。</p>
<h2 id="基本匹配"><a href="#基本匹配" class="headerlink" title="基本匹配"></a>基本匹配</h2><p>正则表达式其实就是在执行搜索时的格式，它由一些字母和数字组合而成。例如：一个正则表达式 <code>the</code>，它表示一个规则：由字母 <code>t</code> 开始，接着是 <code>h</code>，再接着是 <code>e</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;the&quot; =&gt; The fat cat sat on [the] mat.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/dmRygT/1" target="_blank" rel="noopener">在线练习</a></p>
<p>正则表达式 <code>123</code> 匹配字符串 <code>123</code>。它逐个字符的与输入的正则表达式做比较。</p>
<p>正则表达式是大小写敏感的，所以 <code>The</code> 不会匹配 <code>the</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;The&quot; =&gt; [The] fat cat sat on the mat.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/1paXsy/1" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="元字符"><a href="#元字符" class="headerlink" title="元字符"></a>元字符</h2><p>正则表达式主要依赖于元字符。元字符不代表他们本身的字面意思，他们都有特殊的含义。一些元字符写在中括号中的时候有一些特殊的意思。以下是一些元字符的介绍：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>元字符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>.</code></td>
<td>句号匹配任意单个字符除了换行符。</td>
</tr>
<tr>
<td><code>[]</code></td>
<td>字符种类。匹配中括号内的任意字符。</td>
</tr>
<tr>
<td><code>[^ ]</code></td>
<td>否定的字符种类。匹配除了中括号里的任意字符。</td>
</tr>
<tr>
<td><code>*</code></td>
<td>匹配 &gt;=0 个重复的在 <code>*</code> 号之前的字符。</td>
</tr>
<tr>
<td><code>+</code></td>
<td>匹配 &gt;=1 个重复的 <code>+</code> 号前的字符。</td>
</tr>
<tr>
<td><code>?</code></td>
<td>标记 <code>?</code> 之前的字符为可选。</td>
</tr>
<tr>
<td><code>{n,m}</code></td>
<td>匹配 $p$ 个大括号之间的字符（其中 $n \leq p \leq m$)。</td>
</tr>
<tr>
<td><code>(xyz)</code></td>
<td>字符集，匹配与 <code>xyz</code> 完全相等的字符串。</td>
</tr>
<tr>
<td><code>&#124;</code></td>
<td>或运算符，匹配符号前或后的字符。</td>
</tr>
<tr>
<td><code>\</code></td>
<td>转义字符，用于匹配一些保留的字符 <code>[ ] ( ) { } . * + ? ^ $ \ &#124;</code>。</td>
</tr>
<tr>
<td><code>^</code></td>
<td>从开始行开始匹配。</td>
</tr>
<tr>
<td><code>$</code></td>
<td>从末端开始匹配。</td>
</tr>
</tbody>
</table>
</div>
<h2 id="点运算符"><a href="#点运算符" class="headerlink" title="点运算符 ."></a>点运算符 <code>.</code></h2><p><code>.</code> 是元字符中最简单的例子。<code>.</code> 匹配任意单个字符，但不匹配换行符。例如，表达式 <code>.ar</code> 匹配一个任意字符后面跟着是<code>a</code>和<code>r</code>的字符串。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;.ar&quot; =&gt; [The] [car] [par]ked in the [gar]age.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/xc9GkU/1" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="字符集"><a href="#字符集" class="headerlink" title="字符集"></a>字符集</h2><p>字符集也叫做字符类。中括号用来指定一个字符集。 在中括号中使用连字符来指定字符集的范围。 在中括号中的字符集不关心顺序。 例如，表达式 <code>[Tt]he</code> 匹配 <code>the</code> 和 <code>The</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;[Tt]he&quot; =&gt; [The] car parked in [the] garage.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/2ITLQ4/1" target="_blank" rel="noopener">在线练习</a></p>
<p>中括号的句号就表示句号。 表达式 <code>ar[.]</code> 匹配 <code>ar.</code>字符串</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;ar[.]&quot; =&gt; A garage is a good place to park a c[ar.]</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/wL3xtE/1" target="_blank" rel="noopener">在线练习</a></p>
<h3 id="否定字符集"><a href="#否定字符集" class="headerlink" title="否定字符集"></a>否定字符集</h3><p>一般来说 <code>^</code> 表示一个字符串的开头，但它用在一个中括号的开头的时候，它表示这个字符集是否定的。 例如，表达式<code>[^c]ar</code> 匹配一个后面跟着<code>ar</code>的除了<code>c</code>的任意字符。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;[^c]ar&quot; =&gt; The car [par]ked in the [gar]age.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/nNNlq3/1" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="重复次数"><a href="#重复次数" class="headerlink" title="重复次数"></a>重复次数</h2><p>后面跟着元字符 <code>+</code>，<code>*</code> 或 <code>?</code> 的，用来指定匹配子模式的次数。 这些元字符在不同的情况下有着不同的意思。</p>
<h3 id="号"><a href="#号" class="headerlink" title="* 号"></a><code>*</code> 号</h3><p><code>*</code> 号匹配 在 <code>*</code> 之前的字符出现<strong>大于等于 0</strong>次。 例如，表达式 <code>a*</code> 匹配0或更多个以 <code>a</code> 开头的字符。表达式 <code>[a-z]*</code> 匹配一个行中所有以小写字母开头的字符串。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;[a-z]*&quot; =&gt; T[he] [car] [parked] [in] [the] [garage] #21.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/7m8me5/1" target="_blank" rel="noopener">在线练习</a></p>
<p><code>*</code> 字符和 <code>.</code> 字符搭配可以匹配所有的字符 <code>.*</code>。<code>*</code> 和表示匹配空格的符号 <code>\s</code> 连起来用，如表达式 <code>\s*cat\s*</code> 匹配 <code>0</code> 或更多个空格开头和 <code>0</code>或更多个空格结尾的 <code>cat</code> 字符串。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;\s*cat\s*&quot; =&gt; The fat [cat] sat on the con[cat]enation.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/gGrwuz/1" target="_blank" rel="noopener">在线练习</a></p>
<h3 id="号-1"><a href="#号-1" class="headerlink" title="+ 号"></a><code>+</code> 号</h3><p><code>+</code> 号匹配 <code>+</code> 号之前的字符<strong>出现 &gt;=1 次</strong>。 例如表达式 <code>c.+t</code> 匹配以首字母 <code>c</code> 开头以 <code>t</code> 结尾，中间跟着至少一个字符的字符串。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;c.+t&quot; =&gt; The fat [cat sat on the mat].</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/Dzf9Aa/1" target="_blank" rel="noopener">在线练习</a></p>
<h3 id="号-2"><a href="#号-2" class="headerlink" title="? 号"></a><code>?</code> 号</h3><p>在正则表达式中元字符 <code>?</code> 标记在符号前面的字符为可选，即<strong>出现 0 或 1 次</strong>。 例如，表达式 <code>[T]?he</code> 匹配字符串 <code>he</code> 和 <code>The</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;[T]he&quot; =&gt; [The] car is parked in the garage.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/cIg9zm/1" target="_blank" rel="noopener">在线练习</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;[T]?he&quot; =&gt; [The] car is parked in t[he] garage.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/kPpO2x/1" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="号-3"><a href="#号-3" class="headerlink" title="{} 号"></a><code>{}</code> 号</h2><p>在正则表达式中 <code>{}</code> 是一个量词，常用来一个或一组字符可以重复出现的次数。例如，表达式 <code>[0-9]{2,3}</code> 匹配最少 2 位最多 3 位 0~9 的数字。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;[0-9]&#123;2,3&#125;&quot; =&gt; The number was 9.[999]7 but we rounded it off to [10].0.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/juM86s/1" target="_blank" rel="noopener">在线练习</a></p>
<p>我们可以省略第二个参数。 例如，<code>[0-9]{2,}</code> 匹配至少两位 0~9 的数字。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;[0-9]&#123;2,&#125;&quot; =&gt; The number was 9.[9997] but we rounded it off to [10].0.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/Gdy4w5/1" target="_blank" rel="noopener">在线练习</a></p>
<p>如果逗号也省略掉则表示重复固定的次数。 例如，<code>[0-9]{3}</code> 匹配3位数字</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;[0-9]&#123;3&#125;&quot; =&gt; The number was 9.[999]7 but we rounded it off to 10.0.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/Sivu30/1" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="特征标群"><a href="#特征标群" class="headerlink" title="(...) 特征标群"></a><code>(...)</code> 特征标群</h2><p>特征标群是一组写在 <code>(...)</code> 中的子模式。例如之前说的 <code>{}</code> 是用来表示前面一个字符出现指定次数。但如果在 <code>{}</code> 前加入特征标群则表示整个标群内的字符重复 N 次。例如，表达式 <code>(ab)*</code> 匹配连续出现 0 或更多个 <code>ab</code>。</p>
<p>我们还可以在 <code>()</code> 中用或字符 <code>|</code> 表示或。例如，<code>(c|g|p)ar</code> 匹配 <code>car</code> 或 <code>gar</code> 或 <code>par</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;(c|g|p)ar&quot; =&gt; The [car] is [par]ked in the [gar]age.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/tUxrBG/1" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="或运算符"><a href="#或运算符" class="headerlink" title="| 或运算符"></a><code>|</code> 或运算符</h2><p>或运算符就表示或，用作判断条件。</p>
<p>例如 <code>(T|t)he|car</code> 匹配 <code>(T|t)he</code> 或 <code>car</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;(T|t)he|car&quot; =&gt; [The] [car] is parked in [the] garage.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/fBXyX0/1" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="转码特殊字符"><a href="#转码特殊字符" class="headerlink" title="转码特殊字符"></a>转码特殊字符</h2><p>反斜线 <code>\</code> 在表达式中用于转码紧跟其后的字符。用于指定 <code>{ } [ ] / \ + * . $ ^ | ?</code> 这些特殊字符。如果想要匹配这些特殊字符则要在其前面加上反斜线 <code>\</code>。</p>
<p>例如 <code>.</code> 是用来匹配除换行符外的所有字符的。如果想要匹配句子中的 <code>.</code> 则要写成 <code>\.</code> 以下这个例子 <code>\.?</code>是选择性匹配<code>.</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;(f|c|m)at\.?&quot; =&gt; The [fat] [cat] sat on the [mat.]</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/DOc5Nu/1" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="锚点"><a href="#锚点" class="headerlink" title="锚点"></a>锚点</h2><p>在正则表达式中，想要匹配指定开头或结尾的字符串就要使用到锚点。<code>^</code> 指定开头，<code>$</code> 指定结尾。</p>
<h3 id="号-4"><a href="#号-4" class="headerlink" title="^ 号"></a><code>^</code> 号</h3><p><code>^</code> 用来检查匹配的字符串是否在所匹配字符串的开头。</p>
<p>例如，在 <code>abc</code> 中使用表达式 <code>^a</code> 会得到结果 <code>a</code>。但如果使用 <code>^b</code> 将匹配不到任何结果。因为在字符串 <code>abc</code> 中并不是以 <code>b</code>开头。</p>
<p>例如，<code>^(T|t)he</code> 匹配以 <code>The</code> 或 <code>the</code> 开头的字符串。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;(T|t)he&quot; =&gt; [The] car is parked in [the] garage.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/5ljjgB/1" target="_blank" rel="noopener">在线练习</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;^(T|t)he&quot; =&gt; [The] car is parked in the garage.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/jXrKne/1" target="_blank" rel="noopener">在线练习</a></p>
<h3 id="号-5"><a href="#号-5" class="headerlink" title="$ 号"></a><code>$</code> 号</h3><p>同理于 <code>^</code> 号，<code>$</code> 号用来匹配字符是否是最后一个。</p>
<p>例如，<code>(at\.)$</code> 匹配以 <code>at.</code> 结尾的字符串。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;(at\.)&quot; =&gt; The fat c[at.] s[at.] on the m[at.]</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/y4Au4D/1" target="_blank" rel="noopener">在线练习</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;(at\.)$&quot; =&gt; The fat cat. sat. on the m[at.]</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/t0AkOd/1" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="简写字符集"><a href="#简写字符集" class="headerlink" title="简写字符集"></a>简写字符集</h2><p>正则表达式提供一些常用的字符集简写。如下:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>简写</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>.</td>
<td>除换行符外的所有字符。</td>
</tr>
<tr>
<td>\w</td>
<td>匹配所有字母数字，等同于 <code>[a-zA-Z0-9_]</code>。</td>
</tr>
<tr>
<td>\W</td>
<td>匹配所有非字母数字，即符号，等同于： <code>[^\w]</code>。</td>
</tr>
<tr>
<td>\d</td>
<td>匹配数字： <code>[0-9]</code>。</td>
</tr>
<tr>
<td>\D</td>
<td>匹配非数字： <code>[^\d]</code>。</td>
</tr>
<tr>
<td>\s</td>
<td>匹配所有空格字符，等同于： <code>[\t\n\f\r\p{Z}]</code>。</td>
</tr>
<tr>
<td>\S</td>
<td>匹配所有非空格字符： <code>[^\s]</code>。</td>
</tr>
<tr>
<td>\f</td>
<td>匹配一个换页符。</td>
</tr>
<tr>
<td>\n</td>
<td>匹配一个换行符。</td>
</tr>
<tr>
<td>\r</td>
<td>匹配一个回车符。</td>
</tr>
<tr>
<td>\t</td>
<td>匹配一个制表符。</td>
</tr>
<tr>
<td>\v</td>
<td>匹配一个垂直制表符。</td>
</tr>
<tr>
<td>\p</td>
<td>匹配 CR/LF（等同于 <code>\r\n</code>），用来匹配 DOS 行终止符。</td>
</tr>
</tbody>
</table>
</div>
<h2 id="零宽度断言（前后预查）"><a href="#零宽度断言（前后预查）" class="headerlink" title="零宽度断言（前后预查）"></a>零宽度断言（前后预查）</h2><p>先行断言和后发断言都属于<strong>非捕获簇</strong>（不捕获文本，也不针对组合计进行计数）。先行断言用于判断所匹配的格式是否在另一个确定的格式之前，匹配结果不包含该确定格式（仅作为约束）。</p>
<p>例如，我们想要获得所有跟在 <script type="math/tex">` 符号后的数字，我们可以使用正后发断言 `(?<=\$)[0-9\.]*`。 这个表达式匹配 `</script> 开头，之后跟着 <code>0,1,2,3,4,5,6,7,8,9,.</code> 这些字符可以出现大于等于 0 次。</p>
<p>零宽度断言如下：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>符号</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>?=</td>
<td>正先行断言-存在</td>
</tr>
<tr>
<td>?!</td>
<td>负先行断言-排除</td>
</tr>
<tr>
<td>?&lt;=</td>
<td>正后发断言-存在</td>
</tr>
<tr>
<td>?&lt;!</td>
<td>负后发断言-排除</td>
</tr>
</tbody>
</table>
</div>
<h3 id="正先行断言"><a href="#正先行断言" class="headerlink" title="?=... 正先行断言"></a><code>?=...</code> 正先行断言</h3><p><code>?=...</code> 正先行断言，表示第一部分表达式之后必须跟着 <code>?=...</code>定义的表达式。</p>
<p>返回结果只包含满足匹配条件的第一部分表达式。定义一个正先行断言要使用 <code>()</code>。在括号内部使用一个问号和等号：<code>(?=...)</code>。</p>
<p>正先行断言的内容写在括号中的等号后面。例如，表达式 <code>(T|t)he(?=\sfat)</code> 匹配 <code>The</code> 和 <code>the</code>，在括号中我们又定义了正先行断言 <code>(?=\sfat)</code>，即 <code>The</code> 和 <code>the</code> 后面紧跟着 <code>(空格)fat</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;(T|t)he(?=\sfat)&quot; =&gt; [The] fat cat sat on the mat.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/IDDARt/1" target="_blank" rel="noopener">在线练习</a></p>
<h3 id="负先行断言"><a href="#负先行断言" class="headerlink" title="?!... 负先行断言"></a><code>?!...</code> 负先行断言</h3><p>负先行断言 <code>?!</code> 用于筛选所有匹配结果，筛选条件为 其后不跟随着断言中定义的格式。 <code>正先行断言</code> 定义和 <code>负先行断言</code> 一样，区别就是 <code>=</code> 替换成 <code>!</code> 也就是 <code>(?!...)</code>。</p>
<p>表达式 <code>(T|t)he(?!\sfat)</code> 匹配 <code>The</code> 和 <code>the</code>，且其后不跟着 <code>(空格)fat</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;(T|t)he(?!\sfat)&quot; =&gt; The fat cat sat on [the] mat.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/V32Npg/1" target="_blank" rel="noopener">在线练习</a></p>
<h3 id="lt-正后发断言"><a href="#lt-正后发断言" class="headerlink" title="?&lt;= ... 正后发断言"></a><code>?&lt;= ...</code> 正后发断言</h3><p>正后发断言 记作<code>(?&lt;=...)</code> 用于筛选所有匹配结果，筛选条件为 其前跟随着断言中定义的格式。 例如，表达式 <code>(?&lt;=(T|t)he\s)(fat|mat)</code> 匹配 <code>fat</code> 和 <code>mat</code>，且其前跟着 <code>The</code> 或 <code>the</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;(?&lt;=(T|t)he\s)(fat|mat)&quot; =&gt; The [fat] cat sat on the [mat].</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/avH165/1" target="_blank" rel="noopener">在线练习</a></p>
<h3 id="负后发断言"><a href="#负后发断言" class="headerlink" title="? 负后发断言"></a><code>?</code> 负后发断言</h3><p>负后发断言 记作 <code>(?</code> 用于筛选所有匹配结果，筛选条件为 其前不跟随着断言中定义的格式。例如，表达式 <code>(?</code> 匹配 <code>cat</code>，且其前不跟着 <code>The</code> 或 <code>the</code>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;(?&lt;!(T|t)he\s)(cat)&quot; =&gt; The cat sat on [cat].</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/8Efx5G/1" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="标志"><a href="#标志" class="headerlink" title="标志"></a>标志</h2><p>标志也叫模式修正符，因为它可以用来修改表达式的搜索结果。这些标志可以任意的组合使用，它也是整个正则表达式的一部分。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>标志</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>i</td>
<td>忽略大小写。</td>
</tr>
<tr>
<td>g</td>
<td>全局搜索。</td>
</tr>
<tr>
<td>m</td>
<td>多行修饰符：锚点元字符 <code>^</code> <code>$</code> 工作范围在每行的起始。</td>
</tr>
</tbody>
</table>
</div>
<h3 id="忽略大小写（Case-Insensitive）"><a href="#忽略大小写（Case-Insensitive）" class="headerlink" title="忽略大小写（Case Insensitive）"></a>忽略大小写（Case Insensitive）</h3><p>修饰语 <code>i</code> 用于忽略大小写。 例如，表达式 <code>/The/gi</code> 表示在全局搜索 <code>The</code>，在后面的 <code>i</code> 将其条件修改为忽略大小写，则变成搜索 <code>the</code> 和 <code>The</code>，<code>g</code> 表示全局搜索。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;The&quot; =&gt; [The] fat cat sat on the mat.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/dpQyf9/1" target="_blank" rel="noopener">在线练习</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;/The/gi&quot; =&gt; [The] fat cat sat on [the] mat.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/ahfiuh/1" target="_blank" rel="noopener">在线练习</a></p>
<h3 id="全局搜索（Global-search）"><a href="#全局搜索（Global-search）" class="headerlink" title="全局搜索（Global search）"></a>全局搜索（Global search）</h3><p>修饰符 <code>g</code> 常用于执行一个全局搜索匹配，即“不仅仅返回第一个匹配的，而是返回全部”。例如，表达式 <code>/.(at)/g</code> 表示搜索 <code>除换行外的任意字符 + at</code>，并返回全部结果。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;/.(at)/&quot; =&gt; The [fat] cat sat on the mat.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/jnk6gM/1" target="_blank" rel="noopener">在线练习</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;/.(at)/g&quot; =&gt; The [fat] [cat] [sat] on the [mat].</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/dO1nef/1" target="_blank" rel="noopener">在线练习</a></p>
<h3 id="多行修饰符（Multiline）"><a href="#多行修饰符（Multiline）" class="headerlink" title="多行修饰符（Multiline）"></a>多行修饰符（Multiline）</h3><p>多行修饰符 <code>m</code> 常用于执行一个多行匹配。</p>
<p>像之前介绍的 <code>(^,$)</code> 用于检查格式是否是在待检测字符串的开头或结尾。但我们如果想要它在每行的开头和结尾生效，我们需要用到多行修饰符 <code>m</code>。</p>
<p>例如，表达式 <code>/at(.)?$/gm</code> 表示小写字符 <code>a</code> 后跟小写字符 <code>t</code>，末尾可选除换行符外任意字符。根据 <code>m</code> 修饰符，现在表达式匹配每行的结尾。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;/.at(.)?$/&quot; =&gt; The fat</span><br><span class="line">                cat sat</span><br><span class="line">                on the [mat].</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/hoGMkP/1" target="_blank" rel="noopener">在线练习</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;/.at(.)?$/gm&quot; =&gt; The [fat]</span><br><span class="line">                  cat [sat]</span><br><span class="line">                  on the [mat].</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/E88WE2/1" target="_blank" rel="noopener">在线练习</a></p>
<h3 id="贪婪匹配与惰性匹配（Greedy-vs-lazy-matching）"><a href="#贪婪匹配与惰性匹配（Greedy-vs-lazy-matching）" class="headerlink" title="贪婪匹配与惰性匹配（Greedy vs lazy matching）"></a>贪婪匹配与惰性匹配（Greedy vs lazy matching）</h3><p>正则表达式默认采用贪婪匹配模式，在该模式下意味着会匹配尽可能长的子串。我们可以使用 <code>?</code> 将贪婪匹配模式转化为惰性匹配模式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;/(.*at)/&quot; =&gt; [The fat cat sat on the mat].</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/AyAdgJ/1" target="_blank" rel="noopener">在线练习</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;/(.*?at)/&quot; =&gt; [The fat] cat sat on the mat.</span><br></pre></td></tr></table></figure>
<p><a href="https://regex101.com/r/AyAdgJ/2" target="_blank" rel="noopener">在线练习</a></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul>
<li><a href="https://github.com/ziishaned/learn-regex/blob/master/translations/README-cn.md" target="_blank" rel="noopener">这篇文章</a>（都来自这篇文章）</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">正则表达式</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/正则表达式/">正则表达式</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>



   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2019/11/20/csharp-fraction-struct/" title="C# 实现一个分数类型的结构" itemprop="url">C# 实现一个分数类型的结构</a>
    
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="向向" target="_blank" itemprop="author">向向</a>
		
  <p class="article-time">
    <time datetime="2019-11-20T13:45:28.000Z" itemprop="datePublished"> 发表于 2019-11-20</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h2 id="让我们愉快地写一个分数结构吧！"><a href="#让我们愉快地写一个分数结构吧！" class="headerlink" title="让我们愉快地写一个分数结构吧！"></a>让我们愉快地写一个分数结构吧！</h2><p>因为分数的类型比较轻量级，仅包含两个字段，所以我们可以使用值类型。</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">readonly</span> <span class="keyword">struct</span> Fraction : IEquatable&lt;Fraction&gt;, IComparable&lt;Fraction&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">readonly</span> Fraction Zero = <span class="keyword">new</span> Fraction(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">readonly</span> Fraction One = <span class="keyword">new</span> Fraction(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">readonly</span> Fraction MinusOne = <span class="keyword">new</span> Fraction(<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">readonly</span> <span class="keyword">int</span> gcd;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Fraction</span>(<span class="params"><span class="keyword">int</span> numerator</span>) : <span class="title">this</span>(<span class="params">numerator, <span class="number">1</span></span>)</span> &#123; &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Fraction</span>(<span class="params"><span class="keyword">int</span> numerator, <span class="keyword">int</span> denominator</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        gcd = GetGcd(Math.Abs(numerator), Math.Abs(denominator));</span><br><span class="line">        Numerator = Deduct(numerator, gcd);</span><br><span class="line">        Denominator = Deduct(denominator, gcd);</span><br><span class="line">        IsPositive = !(numerator &gt; <span class="number">0</span> ^ denominator &gt; <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">Deduct</span>(<span class="params"><span class="keyword">int</span> digit, <span class="keyword">int</span> gcd</span>)</span> =&gt; Math.Abs(digit) / gcd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">bool</span> IsPositive &#123; <span class="keyword">get</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">decimal</span> Value =&gt; (<span class="keyword">decimal</span>)Numerator / Denominator;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> Numerator &#123; <span class="keyword">get</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> Denominator &#123; <span class="keyword">get</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> Fraction Nagate =&gt; <span class="keyword">new</span> Fraction(-Numerator, Denominator);</span><br><span class="line">    <span class="keyword">public</span> Fraction Reciprocal =&gt; <span class="keyword">new</span> Fraction(Denominator, Numerator);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">CompareTo</span>(<span class="params">Fraction other</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">var</span> result = <span class="keyword">this</span> - other;</span><br><span class="line">        <span class="keyword">return</span> result &gt; <span class="number">0</span> ? <span class="number">1</span> : result &lt; <span class="number">0</span> ? <span class="number">-1</span> : <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">CompareTo</span>(<span class="params"><span class="keyword">int</span> other</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> other == <span class="number">0</span> ? Numerator == <span class="number">0</span> ? <span class="number">0</span> : IsPositive ? <span class="number">1</span> : <span class="number">-1</span> : CompareTo((Fraction)other);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">Truncate</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>)Value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">TruncatingDivide</span>(<span class="params">Fraction fraction</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>)(<span class="keyword">this</span> / fraction);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">bool</span> <span class="title">Equals</span>(<span class="params"><span class="keyword">object</span>? obj</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> obj <span class="keyword">is</span> Fraction comparer &amp;&amp; Equals(comparer);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">bool</span> <span class="title">Equals</span>(<span class="params">Fraction other</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> Numerator == other.Numerator &amp;&amp; Denominator == other.Denominator;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">int</span> <span class="title">GetHashCode</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> Value.GetHashCode();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">override</span> <span class="keyword">string</span> <span class="title">ToString</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">$"<span class="subst">&#123;(IsPositive ? <span class="string">""</span> : <span class="string">"-"</span>)&#125;</span><span class="subst">&#123;Numerator&#125;</span><span class="subst">&#123;(Denominator == <span class="number">1</span> ? <span class="string">""</span> : <span class="string">$"/<span class="subst">&#123;Denominator&#125;</span>"</span>)&#125;</span>"</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">SuppressMessage(<span class="meta-string">"Design"</span>, <span class="meta-string">"CA1031:Do not catch general exception types"</span>, Justification = <span class="meta-string">"&lt;Pending&gt;"</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="title">TryParse</span>(<span class="params"><span class="keyword">string</span> str, [NotNullWhen(<span class="literal">true</span></span>)] <span class="keyword">out</span> Fraction? result)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            result = Parse(str);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span></span><br><span class="line">        &#123;</span><br><span class="line">            result = <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Fraction <span class="title">Parse</span>(<span class="params"><span class="keyword">string</span> str</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">if</span> (str.Contains(<span class="string">'/'</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">const</span> <span class="keyword">string</span> digitPattern = <span class="string">@"[+-]?\d+"</span>;</span><br><span class="line">            <span class="keyword">var</span> match = <span class="keyword">new</span> Regex(<span class="string">$@"<span class="subst">&#123;digitPattern&#125;</span>/\s*<span class="subst">&#123;digitPattern&#125;</span>"</span>).Match(str);</span><br><span class="line">            <span class="keyword">if</span> (match.Success)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">var</span> mc = <span class="keyword">new</span> Regex(digitPattern).Matches(str);</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> Fraction(<span class="keyword">int</span>.Parse(mc[<span class="number">0</span>].Value), <span class="keyword">int</span>.Parse(mc[<span class="number">1</span>].Value));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// Parse failed.</span></span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> ArgumentException(<span class="string">"Cannot parse value to target type."</span>, <span class="keyword">nameof</span>(str));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> Fraction(<span class="keyword">int</span>.Parse(str));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">GetGcd</span>(<span class="params"><span class="keyword">int</span> a, <span class="keyword">int</span> b</span>)</span> =&gt; b == <span class="number">0</span> ? a : GetGcd(b, a % b);</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">GetLcm</span>(<span class="params"><span class="keyword">int</span> a, <span class="keyword">int</span> b</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">int</span> gcd = GetGcd(a, b);</span><br><span class="line">        <span class="keyword">return</span> Math.Max(a / gcd, b / gcd) * gcd;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Fraction <span class="keyword">operator</span> +(Fraction fraction) =&gt; fraction;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Fraction <span class="keyword">operator</span> -(Fraction fraction) =&gt; fraction.Nagate;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Fraction <span class="keyword">operator</span> ++(Fraction fraction) =&gt; fraction + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Fraction <span class="keyword">operator</span> --(Fraction fraction) =&gt; fraction - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Fraction <span class="keyword">operator</span> +(Fraction left, Fraction right)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> (a, b, c, d) = (left.Numerator, left.Denominator, right.Numerator, right.Denominator);</span><br><span class="line">        <span class="keyword">var</span> (s1, s2) = (left.IsPositive, right.IsPositive);</span><br><span class="line">        <span class="keyword">int</span> lcm = GetLcm(b, d);</span><br><span class="line">        a *= lcm / b;</span><br><span class="line">        c *= lcm / d;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Fraction((s1 ? a : -a) + (s2 ? c : -c), lcm);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Fraction <span class="keyword">operator</span> -(Fraction left, Fraction right)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> left + right.Nagate;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Fraction <span class="keyword">operator</span> *(Fraction left, Fraction right)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> (a, b, c, d) = (left.Numerator, left.Denominator, right.Numerator, right.Denominator);</span><br><span class="line">        <span class="keyword">bool</span> isPositive = !(left.IsPositive ^ right.IsPositive);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Fraction((isPositive ? a : -a) * c, b * d);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Fraction <span class="keyword">operator</span> /(Fraction left, Fraction right)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> left * right.Reciprocal;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Fraction <span class="keyword">operator</span> %(Fraction left, Fraction right)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> left - right * left.TruncatingDivide(right);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="keyword">operator</span> ==(Fraction left, Fraction right)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> left.Equals(right);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="keyword">operator</span> !=(Fraction left, Fraction right)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> !left.Equals(right);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &gt;(Fraction left, Fraction right)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> left.CompareTo(right) &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &lt;(Fraction left, Fraction right)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> left.CompareTo(right) &lt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &gt;=(Fraction left, Fraction right)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> left.CompareTo(right) &gt;= <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &lt;=(Fraction left, Fraction right)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> left.CompareTo(right) &lt;= <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">explicit</span> <span class="keyword">operator</span> <span class="title">byte</span>(<span class="params">Fraction fraction</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">byte</span>)fraction.Value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">explicit</span> <span class="keyword">operator</span> <span class="title">short</span>(<span class="params">Fraction fraction</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">short</span>)fraction.Value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">explicit</span> <span class="keyword">operator</span> <span class="title">int</span>(<span class="params">Fraction fraction</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> fraction.Truncate();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">explicit</span> <span class="keyword">operator</span> <span class="title">long</span>(<span class="params">Fraction fraction</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">long</span>)fraction.Value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">implicit</span> <span class="keyword">operator</span> <span class="title">float</span>(<span class="params">Fraction fraction</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">float</span>)fraction.Value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">implicit</span> <span class="keyword">operator</span> <span class="title">double</span>(<span class="params">Fraction fraction</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">double</span>)fraction.Value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">implicit</span> <span class="keyword">operator</span> <span class="title">decimal</span>(<span class="params">Fraction fraction</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> fraction.Value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">implicit</span> <span class="keyword">operator</span> <span class="title">Fraction</span>(<span class="params"><span class="keyword">int</span> <span class="keyword">value</span></span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Fraction(<span class="keyword">value</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/C%E2%99%AF/">C♯</a>►<a class="article-category-link" href="/categories/C%E2%99%AF/C%E2%99%AF-%E6%95%B0%E5%AD%A6/">C♯.数学</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/C♯/">C♯</a><a href="/tags/数学/">数学</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>




  <nav id="page-nav" class="clearfix">
    <a class="extend prev" rel="prev" href="/page/3/">上一页 ↑</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/5/">下一页 ↓</a>
  </nav>

</div>
      <div class="openaside"><a class="navbutton" href="#" title="显示侧边栏"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="隐藏侧边栏"></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github 名片</p>
<div class="github-card" data-github="Sunnie-Shine" data-theme="medium"></div>
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>



  
<div class="tagslist">
	<p class="asidetitle">标签</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/C♯/" title="C♯">C♯<sup>30</sup></a></li>
			
		
			
				<li><a href="/tags/C/" title="C">C<sup>24</sup></a></li>
			
		
			
				<li><a href="/tags/LINQ/" title="LINQ">LINQ<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/位运算/" title="位运算">位运算<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/数独/" title="数独">数独<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/数学/" title="数学">数学<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/C♯-编译器生成/" title="C♯.编译器生成">C♯.编译器生成<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/SQL/" title="SQL">SQL<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/C♯-7/" title="C♯ 7">C♯ 7<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/C♯-8/" title="C♯ 8">C♯ 8<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/正则表达式/" title="正则表达式">正则表达式<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Hexo/" title="Hexo">Hexo<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/向向的每周数独/" title="向向的每周数独">向向的每周数独<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/ASP/" title="ASP">ASP<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/Java/" title="Java">Java<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/安卓/" title="安卓">安卓<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/诗词/" title="诗词">诗词<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/C♯-3/" title="C♯ 3">C♯ 3<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/C♯-6/" title="C♯ 6">C♯ 6<sup>1</sup></a></li>
			
		
			
				<li><a href="/tags/C♯-2/" title="C♯ 2">C♯ 2<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">友情链接</p>
    <ul>
        
          <li>
            
            	<a href="https://sunniesudoku.cn/" target="_blank" title="向向的数独文档库">向向的数独文档库</a>
            
          </li>
        
          <li>
            
            	<a href="http://tieba.baidu.com/f?kw=%CA%FD%B6%C0" target="_blank" title="数独贴吧">数独贴吧</a>
            
          </li>
        
          <li>
            
            	<a href="https://space.bilibili.com/23736703" target="_blank" title="Bilibili">Bilibili</a>
            
          </li>
        
    </ul>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello, I&#39;m Sunnie. <br/>
			This is my blog.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		<a href="https://github.com/Sunnie-Shine" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		<a href="http://www.zhihu.com/people/Sunnie-Shine" target="_blank" class="icon-zhihu" title="知乎"></a>
		
		
		
	</div>
			
		

		<p class="copyright">
		Copyright © 2020 
		
		<a href="/about" target="_blank" title="向向">向向</a>
		
		<br />
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a>
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>












<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->





<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="返回顶部"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript"
  async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML">
</script>


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
